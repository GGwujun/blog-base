<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="/logo.png" />
    <link rel="stylesheet" href="/blog-base/umi.css" />
    <script>
      window.routerBase = "/blog-base";
    </script>
    <script>
      window.publicPath = window.resourceBaseUrl || "/blog-base/";
    </script>
    <script>
      //! umi version: 3.5.41
    </script>
    <script>
      !(function () {
        var e =
            navigator.cookieEnabled && void 0 !== window.localStorage
              ? localStorage.getItem("dumi:prefers-color")
              : "auto",
          o = window.matchMedia("(prefers-color-scheme: dark)").matches,
          t = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === t[2] ? (o ? t[1] : t[0]) : t.indexOf(e) > -1 ? e : t[0]
        );
      })();
    </script>
    <title>第22讲 | VPN：朝中有人好做官 - 大师兄</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/05" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-base/">大师兄</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span>计算机基础<ul><li><a href="/blog-base/编译原理之美">编译原理之美</a></li><li><a href="/blog-base/编译原理实战">编译原理实战</a></li><li><a href="/blog-base/深入浅出计算机组成原理">深入浅出计算机组成原理</a></li><li><a href="/blog-base/详解http">详解http</a></li><li><a href="/blog-base/计算机网络通关29讲">计算机网络通关29讲</a></li><li><a href="/blog-base/网络排查案例课">网络排查案例课</a></li><li><a href="/blog-base/linux操作系统">linux操作系统</a></li><li><a href="/blog-base/linux内核技术实战课">linux内核技术实战课</a></li><li><a href="/blog-base/linux性能优化实战">linux性能优化实战</a></li><li><a href="/blog-base/程序员数学基础">程序员数学基础</a></li><li><a aria-current="page" class="active" href="/blog-base/趣谈网络协议">趣谈网络协议</a></li><li><a href="/blog-base/操作系统实战">操作系统实战</a></li><li><a href="/blog-base/软件工程之美">软件工程之美</a></li><li><a href="/blog-base/sql必知必会">sql必知必会</a></li><li><a href="/blog-base/操作系统实战45讲">操作系统实战45讲</a></li><li><a href="/blog-base/网络编程实战">网络编程实战</a></li><li><a href="/blog-base/趣谈linux操作系统">趣谈linux操作系统</a></li></ul></span><span>算法<ul><li><a href="/blog-base/常用算法25讲">常用算法25讲</a></li><li><a href="/blog-base/数据结构与算法之美">数据结构与算法之美</a></li><li><a href="/blog-base/业务开发算法50讲">业务开发算法50讲</a></li><li><a href="/blog-base/动态规划面试宝典">动态规划面试宝典</a></li></ul></span><span>前端开发<ul><li><a href="/blog-base/正则表达式入门">正则表达式入门</a></li></ul></span><span>前端工程化</span><span>前端性能优化</span><span>移动端开发</span><span>软件测试</span><span>产品与用户体验</span><span>面试</span><span>杂谈<ul><li><a href="/blog-base/代码之丑">代码之丑</a></li><li><a href="/blog-base/代码精进之路">代码精进之路</a></li><li><a href="/blog-base/数据分析思维课">数据分析思维课</a></li><li><a href="/blog-base/朱涛kotlin编程第一课">朱涛kotlin编程第一课</a></li><li><a href="/blog-base/重学线性代数">重学线性代数</a></li></ul></span><div class="__dumi-default-navbar-tool"><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-base/"></a><h1>大师兄</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li>计算机基础<ul><li><a href="/blog-base/编译原理之美">编译原理之美</a></li><li><a href="/blog-base/编译原理实战">编译原理实战</a></li><li><a href="/blog-base/深入浅出计算机组成原理">深入浅出计算机组成原理</a></li><li><a href="/blog-base/详解http">详解http</a></li><li><a href="/blog-base/计算机网络通关29讲">计算机网络通关29讲</a></li><li><a href="/blog-base/网络排查案例课">网络排查案例课</a></li><li><a href="/blog-base/linux操作系统">linux操作系统</a></li><li><a href="/blog-base/linux内核技术实战课">linux内核技术实战课</a></li><li><a href="/blog-base/linux性能优化实战">linux性能优化实战</a></li><li><a href="/blog-base/程序员数学基础">程序员数学基础</a></li><li><a aria-current="page" class="active" href="/blog-base/趣谈网络协议">趣谈网络协议</a></li><li><a href="/blog-base/操作系统实战">操作系统实战</a></li><li><a href="/blog-base/软件工程之美">软件工程之美</a></li><li><a href="/blog-base/sql必知必会">sql必知必会</a></li><li><a href="/blog-base/操作系统实战45讲">操作系统实战45讲</a></li><li><a href="/blog-base/网络编程实战">网络编程实战</a></li><li><a href="/blog-base/趣谈linux操作系统">趣谈linux操作系统</a></li></ul></li><li>算法<ul><li><a href="/blog-base/常用算法25讲">常用算法25讲</a></li><li><a href="/blog-base/数据结构与算法之美">数据结构与算法之美</a></li><li><a href="/blog-base/业务开发算法50讲">业务开发算法50讲</a></li><li><a href="/blog-base/动态规划面试宝典">动态规划面试宝典</a></li></ul></li><li>前端开发<ul><li><a href="/blog-base/正则表达式入门">正则表达式入门</a></li></ul></li><li>前端工程化</li><li>前端性能优化</li><li>移动端开发</li><li>软件测试</li><li>产品与用户体验</li><li>面试</li><li>杂谈<ul><li><a href="/blog-base/代码之丑">代码之丑</a></li><li><a href="/blog-base/代码精进之路">代码精进之路</a></li><li><a href="/blog-base/数据分析思维课">数据分析思维课</a></li><li><a href="/blog-base/朱涛kotlin编程第一课">朱涛kotlin编程第一课</a></li><li><a href="/blog-base/重学线性代数">重学线性代数</a></li></ul></li></ul><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a href="/blog-base/趣谈网络协议">趣谈网络协议</a></li><li><a href="/blog-base/趣谈网络协议/01.开篇词">01.开篇词</a><ul><li><a href="/blog-base/趣谈网络协议/01.开篇词/01"><span>开篇词 | 想成为技术牛人？先搞定网络协议！</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/02.第一模块通信协议综述">02.第一模块通信协议综述</a><ul><li><a href="/blog-base/趣谈网络协议/02.第一模块通信协议综述/01"><span>第1讲 | 为什么要学习网络协议？</span></a></li><li><a href="/blog-base/趣谈网络协议/02.第一模块通信协议综述/02"><span>第2讲 | 网络分层的真实含义是什么？</span></a></li><li><a href="/blog-base/趣谈网络协议/02.第一模块通信协议综述/03"><span>第3讲 | ifconfig：最熟悉又陌生的命令行</span></a></li><li><a href="/blog-base/趣谈网络协议/02.第一模块通信协议综述/04"><span>第4讲 | DHCP与PXE：IP是怎么来的，又是怎么没的？</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/03.第二模块底层网络知识详解从二层到三层">03.第二模块底层网络知识详解从二层到三层</a><ul><li><a href="/blog-base/趣谈网络协议/03.第二模块底层网络知识详解从二层到三层/01"><span>第5讲 | 从物理层到MAC层：如何在宿舍里自己组网玩联机游戏？</span></a></li><li><a href="/blog-base/趣谈网络协议/03.第二模块底层网络知识详解从二层到三层/02"><span>第6讲 | 交换机与VLAN：办公室太复杂，我要回学校</span></a></li><li><a href="/blog-base/趣谈网络协议/03.第二模块底层网络知识详解从二层到三层/03"><span>第7讲 | ICMP与ping：投石问路的侦察兵</span></a></li><li><a href="/blog-base/趣谈网络协议/03.第二模块底层网络知识详解从二层到三层/04"><span>第8讲 | 世界这么大，我想出网关：欧洲十国游与玄奘西行</span></a></li><li><a href="/blog-base/趣谈网络协议/03.第二模块底层网络知识详解从二层到三层/05"><span>第9讲 | 路由协议：西出网关无故人，敢问路在何方</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/04.第二模块底层网络知识详解最重要的传输层">04.第二模块底层网络知识详解最重要的传输层</a><ul><li><a href="/blog-base/趣谈网络协议/04.第二模块底层网络知识详解最重要的传输层/01"><span>第10讲 | UDP协议：因性善而简单，难免碰到“城会玩”</span></a></li><li><a href="/blog-base/趣谈网络协议/04.第二模块底层网络知识详解最重要的传输层/02"><span>第11讲 | TCP协议（上）：因性恶而复杂，先恶后善反轻松</span></a></li><li><a href="/blog-base/趣谈网络协议/04.第二模块底层网络知识详解最重要的传输层/03"><span>第12讲 | TCP协议（下）：西行必定多妖孽，恒心智慧消磨难</span></a></li><li><a href="/blog-base/趣谈网络协议/04.第二模块底层网络知识详解最重要的传输层/04"><span>第13讲 | 套接字Socket：Talk is cheap, show me the code</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层">05.第二模块底层网络知识详解最常用的应用层</a><ul><li><a href="/blog-base/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/01"><span>第14讲 | HTTP协议：看个新闻原来这么麻烦</span></a></li><li><a href="/blog-base/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/02"><span>第15讲 | HTTPS协议：点外卖的过程原来这么复杂</span></a></li><li><a href="/blog-base/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/03"><span>第16讲 | 流媒体协议：如何在直播里看到美女帅哥？</span></a></li><li><a href="/blog-base/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04"><span>第17讲 | P2P协议：我下小电影，99%急死你</span></a></li></ul></li><li><a aria-current="page" class="active" href="/blog-base/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心">06.第二模块底层网络知识详解陌生的数据中心</a><ul><li><a href="/blog-base/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/01"><span>第18讲 | DNS协议：网络世界的地址簿</span></a></li><li><a href="/blog-base/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/02"><span>第19讲 | HttpDNS：网络世界的地址簿也会指错路</span></a></li><li><a href="/blog-base/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/03"><span>第20讲 | CDN：你去小卖部取过快递么？</span></a></li><li><a href="/blog-base/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/04"><span>第21讲 | 数据中心：我是开发商，自己拿地盖别墅</span></a></li><li><a aria-current="page" class="active" href="/blog-base/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/05"><span>第22讲 | VPN：朝中有人好做官</span></a></li><li><a href="/blog-base/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/06"><span>第23讲 | 移动网络：去巴塞罗那，手机也上不了脸书</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络">07.第三模块热门技术中的应用云计算中的网络</a><ul><li><a href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/01"><span>第24讲 | 云中网络：自己拿地成本高，购买公寓更灵活</span></a></li><li><a href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/02"><span>第25讲 | 软件定义网络：共享基础设施的小区物业管理办法</span></a></li><li><a href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/03"><span>第26讲 | 云中的网络安全：虽然不是土豪，也需要基本安全和保障</span></a></li><li><a href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/04"><span>第27讲 | 云中的网络QoS：邻居疯狂下电影，我该怎么办？</span></a></li><li><a href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/05"><span>第28讲 | 云中网络的隔离GRE、VXLAN：虽然住一个小区，也要保护隐私</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/08.第三模块热门技术中的应用容器技术中的网络">08.第三模块热门技术中的应用容器技术中的网络</a><ul><li><a href="/blog-base/趣谈网络协议/08.第三模块热门技术中的应用容器技术中的网络/01"><span>第29讲 | 容器网络：来去自由的日子，不买公寓去合租</span></a></li><li><a href="/blog-base/趣谈网络协议/08.第三模块热门技术中的应用容器技术中的网络/02"><span>第30讲 | 容器网络之Flannel：每人一亩三分地</span></a></li><li><a href="/blog-base/趣谈网络协议/08.第三模块热门技术中的应用容器技术中的网络/03"><span>第31讲 | 容器网络之Calico：为高效说出善意的谎言</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/09.第三模块热门技术中的应用微服务相关协议">09.第三模块热门技术中的应用微服务相关协议</a><ul><li><a href="/blog-base/趣谈网络协议/09.第三模块热门技术中的应用微服务相关协议/01"><span>第32讲 | RPC协议综述：远在天边，近在眼前</span></a></li><li><a href="/blog-base/趣谈网络协议/09.第三模块热门技术中的应用微服务相关协议/02"><span>第33讲 | 基于XML的SOAP协议：不要说NBA，请说美国职业篮球联赛</span></a></li><li><a href="/blog-base/趣谈网络协议/09.第三模块热门技术中的应用微服务相关协议/03"><span>第34讲 | 基于JSON的RESTful接口协议：我不关心过程，请给我结果</span></a></li><li><a href="/blog-base/趣谈网络协议/09.第三模块热门技术中的应用微服务相关协议/04"><span>第35讲 | 二进制类RPC协议：还是叫NBA吧，总说全称多费劲</span></a></li><li><a href="/blog-base/趣谈网络协议/09.第三模块热门技术中的应用微服务相关协议/05"><span>第36讲 | 跨语言类RPC协议：交流之前，双方先来个专业术语表</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/10.第四模块网络协议知识串讲">10.第四模块网络协议知识串讲</a><ul><li><a href="/blog-base/趣谈网络协议/10.第四模块网络协议知识串讲/01"><span>第37讲 | 知识串讲：用双十一的故事串起碎片的网络协议（上）</span></a></li><li><a href="/blog-base/趣谈网络协议/10.第四模块网络协议知识串讲/02"><span>第38讲 | 知识串讲：用双十一的故事串起碎片的网络协议（中）</span></a></li><li><a href="/blog-base/趣谈网络协议/10.第四模块网络协议知识串讲/03"><span>第39讲 | 知识串讲：用双十一的故事串起碎片的网络协议（下）</span></a></li><li><a href="/blog-base/趣谈网络协议/10.第四模块网络协议知识串讲/04"><span>第40讲 | 搭建一个网络实验环境：授人以鱼不如授人以渔</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/11.答疑与加餐">11.答疑与加餐</a><ul><li><a href="/blog-base/趣谈网络协议/11.答疑与加餐/01"><span>协议专栏特别福利 | 答疑解惑第一期</span></a></li><li><a href="/blog-base/趣谈网络协议/11.答疑与加餐/02"><span>协议专栏特别福利 | 答疑解惑第二期</span></a></li><li><a href="/blog-base/趣谈网络协议/11.答疑与加餐/03"><span>协议专栏特别福利 | 答疑解惑第三期</span></a></li><li><a href="/blog-base/趣谈网络协议/11.答疑与加餐/04"><span>协议专栏特别福利 | 答疑解惑第四期</span></a></li><li><a href="/blog-base/趣谈网络协议/11.答疑与加餐/05"><span>协议专栏特别福利 | 答疑解惑第五期</span></a></li><li><a href="/blog-base/趣谈网络协议/11.答疑与加餐/06"><span>加餐1 | 创作故事：我是如何创作“趣谈网络协议”专栏的？</span></a></li><li><a href="/blog-base/趣谈网络协议/11.答疑与加餐/07"><span>加餐2 | “趣谈网络协议”专栏食用指南</span></a></li><li><a href="/blog-base/趣谈网络协议/11.答疑与加餐/08"><span>第2季回归 | 这次我们来“趣谈Linux操作系统”</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/12.结束语">12.结束语</a><ul><li><a href="/blog-base/趣谈网络协议/12.结束语/01"><span>结束语 | 放弃完美主义，执行力就是限时限量认真完成</span></a></li><li><a href="/blog-base/趣谈网络协议/12.结束语/02"><span>结课测试 | 这些网络协议你都掌握了吗？</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/summary">趣谈网络协议</a></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="VPN是如何工作的？" data-depth="2"><a href="/blog-base/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/05#vpn是如何工作的"><span>VPN是如何工作的？</span></a></li><li title="IPsec VPN的建立过程" data-depth="2"><a href="/blog-base/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/05#ipsec-vpn的建立过程"><span>IPsec VPN的建立过程</span></a></li><li title="小结" data-depth="2"><a href="/blog-base/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/05#小结"><span>小结</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="第22讲--vpn朝中有人好做官"><a aria-hidden="true" tabindex="-1" href="/blog-base/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/05#第22讲--vpn朝中有人好做官"><span class="icon icon-link"></span></a>第22讲 | VPN：朝中有人好做官</h1><p>前面我们讲到了数据中心，里面很复杂，但是有的公司有多个数据中心，需要将多个数据中心连接起来，或者需要办公室和数据中心连接起来。这该怎么办呢？</p><ul><li><p>第一种方式是走公网，但是公网太不安全，你的隐私可能会被别人偷窥。</p></li><li><p>第二种方式是租用专线的方式把它们连起来，这是土豪的做法，需要花很多钱。</p></li><li><p>第三种方式是用VPN来连接，这种方法比较折中，安全又不贵。</p></li></ul><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimage9f689f797934cb5cf40543b716d97e214868.4b5268e3.jpg" alt=""/></p><p><strong>VPN</strong>，全名<strong>Virtual Private Network</strong>，<strong>虚拟专用网</strong>，就是利用开放的公众网络，建立专用数据传输通道，将远程的分支机构、移动办公人员等连接起来。</p><h2 id="vpn是如何工作的"><a aria-hidden="true" tabindex="-1" href="/blog-base/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/05#vpn是如何工作的"><span class="icon icon-link"></span></a>VPN是如何工作的？</h2><p>VPN通过隧道技术在公众网络上仿真一条点到点的专线，是通过利用一种协议来传输另外一种协议的技术，这里面涉及三种协议：<strong>乘客协议</strong>、<strong>隧道协议</strong>和<strong>承载协议</strong>。</p><p>我们以IPsec协议为例来说明。</p><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimage527f52c72a2a29c6b8526a243125e101f77f.98a97d41.jpeg" alt=""/></p><p>你知道如何通过自驾进行海南游吗？这其中，你的车怎么通过琼州海峡呢？这里用到轮渡，其实这就用到<strong>隧道协议</strong>。</p><p>在广州这边开车是有“协议”的，例如靠右行驶、红灯停、绿灯行，这个就相当于“被封装”的<strong>乘客协议</strong>。当然在海南那面，开车也是同样的协议。这就相当于需要连接在一起的一个公司的两个分部。</p><p>但是在海上坐船航行，也有它的协议，例如要看灯塔、要按航道航行等。这就是外层的<strong>承载协议</strong>。</p><p>那我的车如何从广州到海南呢？这就需要你遵循开车的协议，将车开上轮渡，所有通过轮渡的车都关在船舱里面，按照既定的规则排列好，这就是<strong>隧道协议</strong>。</p><p>在大海上，你的车是关在船舱里面的，就像在隧道里面一样，这个时候内部的乘客协议，也即驾驶协议没啥用处，只需要船遵从外层的承载协议，到达海南就可以了。</p><p>到达之后，外部承载协议的任务就结束了，打开船舱，将车开出来，就相当于取下承载协议和隧道协议的头。接下来，在海南该怎么开车，就怎么开车，还是内部的乘客协议起作用。</p><p>在最前面的时候说了，直接使用公网太不安全，所以接下来我们来看一种十分安全的VPN，<strong>IPsec VPN</strong>。这是基于IP协议的<strong>安全隧道协议</strong>，为了保证在公网上面信息的安全，因而采取了一定的机制保证安全性。</p><ul><li><p>机制一：<strong>私密性</strong>，防止信息泄露给未经授权的个人，通过加密把数据从明文变成无法读懂的密文，从而确保数据的私密性。<br/>前面讲HTTPS的时候，说过加密可以分为对称加密和非对称加密。对称加密速度快一些。而VPN一旦建立，需要传输大量数据，因而我们采取对称加密。但是同样，对称加密还是存在加密密钥如何传输的问题，这里需要用到因特网密钥交换（IKE，Internet Key Exchange）协议。</p></li><li><p>机制二：<strong>完整性</strong>，数据没有被非法篡改，通过对数据进行hash运算，产生类似于指纹的数据摘要，以保证数据的完整性。</p></li><li><p>机制三：<strong>真实性</strong>，数据确实是由特定的对端发出，通过身份认证可以保证数据的真实性。</p></li></ul><p>那如何保证对方就是真正的那个人呢？</p><ul><li><p>第一种方法就是<strong>预共享密钥</strong>，也就是双方事先商量好一个暗号，比如“天王盖地虎，宝塔镇河妖”，对上了，就说明是对的。</p></li><li><p>另外一种方法就是<strong>用数字签名来验证</strong>。咋签名呢？当然是使用私钥进行签名，私钥只有我自己有，所以如果对方能用我的数字证书里面的公钥解开，就说明我是我。</p></li></ul><p>基于以上三个特性，组成了<strong>IPsec VPN的协议簇</strong>。这个协议簇内容比较丰富。</p><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimagee4c2e43f13e5c68c9a5455b3793fb530a4c2.e7aa9918.jpeg" alt=""/></p><p>在这个协议簇里面，有两种协议，这两种协议的区别在于封装网络包的格式不一样。</p><ul><li><p>一种协议称为<strong>AH</strong>（<strong>Authentication Header</strong>），只能进行数据摘要 ，不能实现数据加密。</p></li><li><p>还有一种<strong>ESP</strong>（<strong>Encapsulating Security Payload</strong>），能够进行数据加密和数据摘要。</p></li></ul><p>在这个协议簇里面，还有两类算法，分别是<strong>加密算法</strong>和<strong>摘要算法</strong>。</p><p>这个协议簇还包含两大组件，一个用于VPN的双方要进行对称密钥的交换的<strong>IKE组件</strong>，另一个是VPN的双方要对连接进行维护的<strong>SA（Security Association）组件</strong>。</p><h2 id="ipsec-vpn的建立过程"><a aria-hidden="true" tabindex="-1" href="/blog-base/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/05#ipsec-vpn的建立过程"><span class="icon icon-link"></span></a>IPsec VPN的建立过程</h2><p>下面来看IPsec VPN的建立过程，这个过程分两个阶段。</p><p><strong>第一个阶段，建立IKE自己的SA</strong>。这个SA用来维护一个通过身份认证和安全保护的通道，为第二个阶段提供服务。在这个阶段，通过DH（Diffie-Hellman）算法计算出一个对称密钥K。</p><p>DH算法是一个比较巧妙的算法。客户端和服务端约定两个公开的质数p和q，然后客户端随机产生一个数a作为自己的私钥，服务端随机产生一个b作为自己的私钥，客户端可以根据p、q和a计算出公钥A，服务端根据p、q和b计算出公钥B，然后双方交换公钥A和B。</p><p>到此客户端和服务端可以根据已有的信息，各自独立算出相同的结果K，就是<strong>对称密钥</strong>。但是这个过程，对称密钥从来没有在通道上传输过，只传输了生成密钥的材料，通过这些材料，截获的人是无法算出的。</p><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimage24ea24c89b7703ffcb7ce966f9d259b06eea.51a82647.jpeg" alt=""/></p><p>有了这个对称密钥K，接下来是<strong>第二个阶段，建立IPsec SA</strong>。在这个SA里面，双方会生成一个随机的对称密钥M，由K加密传给对方，然后使用M进行双方接下来通信的数据。对称密钥M是有过期时间的，会过一段时间，重新生成一次，从而防止被破解。</p><p>IPsec SA里面有以下内容：</p><ul><li><p>SPI（Security Parameter Index），用于标识不同的连接；</p></li><li><p>双方商量好的加密算法、哈希算法和封装模式；</p></li><li><p>生存周期，超过这个周期，就需要重新生成一个IPsec SA，重新生成对称密钥。</p></li></ul><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimage4d754dd02eaa9a0242252371248a1b455275.cb6ccf74.jpeg" alt=""/></p><p>当IPsec建立好，接下来就可以开始打包封装传输了。</p><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimage1565158af554e14dd93237b136a99d07d165.b8b2802d.jpg" alt=""/></p><p>左面是原始的IP包，在IP头里面，会指定上一层的协议为TCP。ESP要对IP包进行封装，因而IP头里面的上一层协议为ESP。在ESP的正文里面，ESP的头部有双方商讨好的SPI，以及这次传输的序列号。</p><p>接下来全部是加密的内容。可以通过对称密钥进行解密，解密后在正文的最后，指明了里面的协议是什么。如果是IP，则需要先解析IP头，然后解析TCP头，这是从隧道出来后解封装的过程。</p><p>有了IPsec VPN之后，客户端发送的明文的IP包，都会被加上ESP头和IP头，在公网上传输，由于加密，可以保证不被窃取，到了对端后，去掉ESP的头，进行解密。</p><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimage48d2487d8dde5ec7758b4c169509fba59cd2.86cf962d.jpeg" alt=""/></p><p>这种点对点的基于IP的VPN，能满足互通的要求，但是速度往往比较慢，这是由底层IP协议的特性决定的。IP不是面向连接的，是尽力而为的协议，每个IP包自由选择路径，到每一个路由器，都自己去找下一跳，丢了就丢了，是靠上一层TCP的重发来保证可靠性。</p><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimage298e29f4dff1f40a252dda2ac6f9d1d4088e.dd408ab3.jpg" alt=""/></p><p>因为IP网络从设计的时候，就认为是不可靠的，所以即使同一个连接，也可能选择不同的道路，这样的好处是，一条道路崩溃的时候，总有其他的路可以走。当然，带来的代价就是，不断的路由查找，效率比较差。</p><p>和IP对应的另一种技术称为ATM。这种协议和IP协议的不同在于，它是面向连接的。你可以说TCP也是面向连接的啊。这两个不同，ATM和IP是一个层次的，和TCP不是一个层次的。</p><p>另外，TCP所谓的面向连接，是不停地重试来保证成功，其实下层的IP还是不面向连接的，丢了就丢了。ATM是传输之前先建立一个连接，形成一个虚拟的通路，一旦连接建立了，所有的包都按照相同的路径走，不会分头行事。</p><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimageaf48afea2a2cecb8bfe6c1c40585000f1c48.9b191e6a.jpg" alt=""/></p><p>好处是不需要每次都查路由表的，虚拟路径已经建立，打上了标签，后续的包傻傻的跟着走就是了，不用像IP包一样，每个包都思考下一步怎么走，都按相同的路径走，这样效率会高很多。</p><p>但是一旦虚拟路径上的某个路由器坏了，则这个连接就断了，什么也发不过去了，因为其他的包还会按照原来的路径走，都掉坑里了，它们不会选择其他的路径走。</p><p>ATM技术虽然没有成功，但其屏弃了繁琐的路由查找，改为简单快速的标签交换，将具有全局意义的路由表改为只有本地意义的标签表，这些都可以大大提高一台路由器的转发功力。</p><p>有没有一种方式将两者的优点结合起来呢？这就是<strong>多协议标签交换</strong>（<strong>MPLS</strong>，<strong>Multi-Protocol Label Switching</strong>）。MPLS的格式如图所示，在原始的IP头之外，多了MPLS的头，里面可以打标签。</p><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimagec496c45a0a2f11678f15e126449e64644596.43954837.jpeg" alt=""/></p><p>在二层头里面，有类型字段，0x0800表示IP，0x8847表示MPLS Label。</p><p>在MPLS头里面，首先是标签值占20位，接着是3位实验位，再接下来是1位栈底标志位，表示当前标签是否位于栈底了。这样就允许多个标签被编码到同一个数据包中，形成标签栈。最后是8位TTL存活时间字段，如果标签数据包的出发TTL值为0，那么该数据包在网络中的生命期被认为已经过期了。</p><p>有了标签，还需要设备认这个标签，并且能够根据这个标签转发，这种能够转发标签的路由器称为<strong>标签交换路由器</strong>（LSR，Label Switching Router）。</p><p>这种路由器会有两个表格，一个就是传统的FIB，也即路由表，另一个就是LFIB，标签转发表。有了这两个表，既可以进行普通的路由转发，也可以进行基于标签的转发。</p><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimage669766df10af27dbyycee673dc47667dbb97.2ff1eed3.jpeg" alt=""/></p><p>有了标签转发表，转发的过程如图所示，就不用每次都进行普通路由的查找了。</p><p>这里我们区分MPLS区域和非MPLS区域。在MPLS区域中间，使用标签进行转发，非MPLS区域，使用普通路由转发，在边缘节点上，需要有能力将对于普通路由的转发，变成对于标签的转发。</p><p>例如图中要访问114.1.1.1，在边界上查找普通路由，发现马上要进入MPLS区域了，进去了对应标签1，于是在IP头外面加一个标签1，在区域里面，标签1要变成标签3，标签3到达出口边缘，将标签去掉，按照路由发出。</p><p>这样一个通过标签转换而建立的路径称为LSP，标签交换路径。在一条LSP上，沿数据包传送的方向，相邻的LSR分别叫<strong>上游LSR</strong>（<strong>upstream LSR</strong>）和<strong>下游LSR</strong>（<strong>downstream LSR</strong>）。</p><p>有了标签，转发是很简单的事，但是如何生成标签，却是MPLS中最难修炼的部分。在MPLS秘笈中，这部分被称为<strong>LDP</strong>（<strong>Label Distribution Protocol</strong>），是一个动态的生成标签的协议。</p><p>其实LDP与IP帮派中的路由协议十分相像，通过LSR的交互，互相告知去哪里应该打哪个标签，称为标签分发，往往是从下游开始的。</p><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimage916791cd0038877da8933365494625280b67.87bab384.jpeg" alt=""/></p><p>如果有一个边缘节点发现自己的路由表中出现了新的目的地址，它就要给别人说，我能到达一条新的路径了。</p><p>如果此边缘节点存在上游LSR，并且尚有可供分配的标签，则该节点为新的路径分配标签，并向上游发出标签映射消息，其中包含分配的标签等信息。</p><p>收到标签映射消息的LSR记录相应的标签映射信息，在其标签转发表中增加相应的条目。此LSR为它的上游LSR分配标签，并继续向上游LSR发送标签映射消息。</p><p>当入口LSR收到标签映射消息时，在标签转发表中增加相应的条目。这时，就完成了LSP的建立。有了标签，转发轻松多了，但是这个和VPN什么关系呢？</p><p>可以想象，如果我们VPN通道里面包的转发，都是通过标签的方式进行，效率就会高很多。所以要想个办法把MPLS应用于VPN。</p><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimageebaeeb01c7d748b99bc94017f667eb74caae.3825d68e.jpeg" alt=""/></p><p>在MPLS VPN中，网络中的路由器分成以下几类：</p><ul><li><p>PE（Provider Edge）：运营商网络与客户网络相连的边缘网络设备；</p></li><li><p>CE（Customer Edge）：客户网络与PE相连接的边缘设备；</p></li><li><p>P（Provider）：这里特指运营商网络中除PE之外的其他运营商网络设备。</p></li></ul><p>为什么要这样分呢？因为我们发现，在运营商网络里面，也即P Router之间，使用标签是没有问题的，因为都在运营商的管控之下，对于网段，路由都可以自己控制。但是一旦客户要接入这个网络，就复杂得多。</p><p>首先是客户地址重复的问题。客户所使用的大多数都是私网的地址(192.168.X.X;10.X.X.X;172.X.X.X)，而且很多情况下都会与其它的客户重复。</p><p>比如，机构A和机构B都使用了192.168.101.0/24网段的地址，这就发生了地址空间重叠（Overlapping Address Spaces）。</p><p>首先困惑的是BGP协议，既然VPN将两个数据中心连起来，应该看起来像一个数据中心一样，那么如何到达另一端需要通过BGP将路由广播过去，传统BGP无法正确处理地址空间重叠的VPN的路由。</p><p>假设机构A和机构B都使用了192.168.101.0/24网段的地址，并各自发布了一条去往此网段的路由，BGP将只会选择其中一条路由，从而导致去往另一个VPN的路由丢失。</p><p>所以PE路由器之间使用特殊的MP-BGP来发布VPN路由，在相互沟通的消息中，在一般32位IPv4的地址之前加上一个客户标示的区分符用于客户地址的区分，这种称为VPN-IPv4地址族，这样PE路由器会收到如下的消息，机构A的192.168.101.0/24应该往这面走，机构B的192.168.101.0/24则应该去另外一个方向。</p><p>另外困惑的是<strong>路由表</strong>，当两个客户的IP包到达PE的时候，PE就困惑了，因为网段是重复的。</p><p>如何区分哪些路由是属于哪些客户VPN内的？如何保证VPN业务路由与普通路由不相互干扰？</p><p>在PE上，可以通过VRF（VPN Routing&amp;Forwarding Instance）建立每个客户一个路由表，与其它VPN客户路由和普通路由相互区分。可以理解为专属于客户的小路由器。</p><p>远端PE通过MP-BGP协议把业务路由放到近端PE，近端PE根据不同的客户选择出相关客户的业务路由放到相应的VRF路由表中。</p><p>VPN报文转发采用两层标签方式：</p><ul><li><p>第一层（外层）标签在骨干网内部进行交换，指示从PE到对端PE的一条LSP。VPN报文利用这层标签，可以沿LSP到达对端PE；</p></li><li><p>第二层（内层）标签在从对端PE到达CE时使用，在PE上，通过查找VRF表项，指示报文应被送到哪个VPN用户，或者更具体一些，到达哪一个CE。这样，对端PE根据内层标签可以找到转发报文的接口。</p></li></ul><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimage431f43e9ee00e3db2b0cd8315058d38d701f.bff6f12c.jpeg" alt=""/></p><p>我们来举一个例子，看MPLS VPN的包发送过程。</p><ol><li><p>机构A和机构B都发出一个目的地址为192.168.101.0/24的IP报文，分别由各自的CE将报文发送至PE。</p></li><li><p>PE会根据报文到达的接口及目的地址查找VPN实例表项VRF，匹配后将报文转发出去，同时打上内层和外层两个标签。假设通过MP-BGP配置的路由，两个报文在骨干网走相同的路径。</p></li><li><p>MPLS网络利用报文的外层标签，将报文传送到出口PE，报文在到达出口PE 2前一跳时已经被剥离外层标签，仅含内层标签。</p></li><li><p>出口PE根据内层标签和目的地址查找VPN实例表项VRF，确定报文的出接口，将报文转发至各自的CE。</p></li><li><p>CE根据正常的IP转发过程将报文传送到目的地。</p></li></ol><h2 id="小结"><a aria-hidden="true" tabindex="-1" href="/blog-base/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/05#小结"><span class="icon icon-link"></span></a>小结</h2><p>好了，这一节就到这里了，我们来总结一下：</p><ul><li><p>VPN可以将一个机构的多个数据中心通过隧道的方式连接起来，让机构感觉在一个数据中心里面，就像自驾游通过琼州海峡一样；</p></li><li><p>完全基于软件的IPsec VPN可以保证私密性、完整性、真实性、简单便宜，但是性能稍微差一些；</p></li><li><p>MPLS-VPN综合和IP转发模式和ATM的标签转发模式的优势，性能较好，但是需要从运营商购买。</p></li></ul><p>接下来，给你留两个思考题：</p><ol><li><p>当前业务的高可用性和弹性伸缩很重要，所以很多机构都会在自建私有云之外，采购公有云，你知道私有云和公有云应该如何打通吗？</p></li><li><p>前面所有的上网行为，都是基于电脑的，但是移动互联网越来越成为核心，你知道手机上网都需要哪些协议吗？</p></li></ol><p>我们的专栏更新到第22讲，不知你掌握得如何？每节课后我留的思考题，你都有没有认真思考，并在留言区写下答案呢？我会从<strong>已发布的文章中选出一批认真留言的同学</strong>，赠送学习奖励礼券和我整理的独家网络协议知识图谱。</p><p>欢迎你留言和我讨论。趣谈网络协议，我们下期见！</p></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/GGwujun/blog/edit/master/ssrc/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/05.md">在 GitHub 上编辑此页<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="最后更新时间：">2023/9/23 19:21:38</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "//www.google-analytics.com/analytics.js",
            "ga"
          );
          ga("create", "UA-149864185-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="/blog-base/umi.js"></script>
  </body>
</html>
