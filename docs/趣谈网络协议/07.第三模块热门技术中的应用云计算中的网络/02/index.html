<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="/logo.png" />
    <link rel="stylesheet" href="/blog-base/umi.css" />
    <script>
      window.routerBase = "/blog-base";
    </script>
    <script>
      window.publicPath = window.resourceBaseUrl || "/blog-base/";
    </script>
    <script>
      //! umi version: 3.5.41
    </script>
    <script>
      !(function () {
        var e =
            navigator.cookieEnabled && void 0 !== window.localStorage
              ? localStorage.getItem("dumi:prefers-color")
              : "auto",
          o = window.matchMedia("(prefers-color-scheme: dark)").matches,
          t = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === t[2] ? (o ? t[1] : t[0]) : t.indexOf(e) > -1 ? e : t[0]
        );
      })();
    </script>
    <title>
      第25讲 | 软件定义网络：共享基础设施的小区物业管理办法 - 大师兄
    </title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/02" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-base/">大师兄</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span>计算机基础<ul><li><a href="/blog-base/编译原理之美">编译原理之美</a></li><li><a href="/blog-base/编译原理实战">编译原理实战</a></li><li><a href="/blog-base/深入浅出计算机组成原理">深入浅出计算机组成原理</a></li><li><a href="/blog-base/详解http">详解http</a></li><li><a href="/blog-base/计算机网络通关29讲">计算机网络通关29讲</a></li><li><a href="/blog-base/网络排查案例课">网络排查案例课</a></li><li><a href="/blog-base/linux操作系统">linux操作系统</a></li><li><a href="/blog-base/linux内核技术实战课">linux内核技术实战课</a></li><li><a href="/blog-base/linux性能优化实战">linux性能优化实战</a></li><li><a href="/blog-base/程序员数学基础">程序员数学基础</a></li><li><a aria-current="page" class="active" href="/blog-base/趣谈网络协议">趣谈网络协议</a></li><li><a href="/blog-base/操作系统实战">操作系统实战</a></li><li><a href="/blog-base/软件工程之美">软件工程之美</a></li><li><a href="/blog-base/sql必知必会">sql必知必会</a></li><li><a href="/blog-base/操作系统实战45讲">操作系统实战45讲</a></li><li><a href="/blog-base/网络编程实战">网络编程实战</a></li><li><a href="/blog-base/趣谈linux操作系统">趣谈linux操作系统</a></li></ul></span><span>算法<ul><li><a href="/blog-base/常用算法25讲">常用算法25讲</a></li><li><a href="/blog-base/数据结构与算法之美">数据结构与算法之美</a></li><li><a href="/blog-base/业务开发算法50讲">业务开发算法50讲</a></li><li><a href="/blog-base/动态规划面试宝典">动态规划面试宝典</a></li></ul></span><span>前端开发<ul><li><a href="/blog-base/正则表达式入门">正则表达式入门</a></li></ul></span><span>杂谈<ul><li><a href="/blog-base/代码之丑">代码之丑</a></li><li><a href="/blog-base/代码精进之路">代码精进之路</a></li><li><a href="/blog-base/数据分析思维课">数据分析思维课</a></li><li><a href="/blog-base/朱涛kotlin编程第一课">朱涛kotlin编程第一课</a></li><li><a href="/blog-base/重学线性代数">重学线性代数</a></li></ul></span><div class="__dumi-default-navbar-tool"><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-base/"></a><h1>大师兄</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li>计算机基础<ul><li><a href="/blog-base/编译原理之美">编译原理之美</a></li><li><a href="/blog-base/编译原理实战">编译原理实战</a></li><li><a href="/blog-base/深入浅出计算机组成原理">深入浅出计算机组成原理</a></li><li><a href="/blog-base/详解http">详解http</a></li><li><a href="/blog-base/计算机网络通关29讲">计算机网络通关29讲</a></li><li><a href="/blog-base/网络排查案例课">网络排查案例课</a></li><li><a href="/blog-base/linux操作系统">linux操作系统</a></li><li><a href="/blog-base/linux内核技术实战课">linux内核技术实战课</a></li><li><a href="/blog-base/linux性能优化实战">linux性能优化实战</a></li><li><a href="/blog-base/程序员数学基础">程序员数学基础</a></li><li><a aria-current="page" class="active" href="/blog-base/趣谈网络协议">趣谈网络协议</a></li><li><a href="/blog-base/操作系统实战">操作系统实战</a></li><li><a href="/blog-base/软件工程之美">软件工程之美</a></li><li><a href="/blog-base/sql必知必会">sql必知必会</a></li><li><a href="/blog-base/操作系统实战45讲">操作系统实战45讲</a></li><li><a href="/blog-base/网络编程实战">网络编程实战</a></li><li><a href="/blog-base/趣谈linux操作系统">趣谈linux操作系统</a></li></ul></li><li>算法<ul><li><a href="/blog-base/常用算法25讲">常用算法25讲</a></li><li><a href="/blog-base/数据结构与算法之美">数据结构与算法之美</a></li><li><a href="/blog-base/业务开发算法50讲">业务开发算法50讲</a></li><li><a href="/blog-base/动态规划面试宝典">动态规划面试宝典</a></li></ul></li><li>前端开发<ul><li><a href="/blog-base/正则表达式入门">正则表达式入门</a></li></ul></li><li>杂谈<ul><li><a href="/blog-base/代码之丑">代码之丑</a></li><li><a href="/blog-base/代码精进之路">代码精进之路</a></li><li><a href="/blog-base/数据分析思维课">数据分析思维课</a></li><li><a href="/blog-base/朱涛kotlin编程第一课">朱涛kotlin编程第一课</a></li><li><a href="/blog-base/重学线性代数">重学线性代数</a></li></ul></li></ul><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a href="/blog-base/趣谈网络协议">趣谈网络协议</a></li><li><a href="/blog-base/趣谈网络协议/01.开篇词">01.开篇词</a><ul><li><a href="/blog-base/趣谈网络协议/01.开篇词/01"><span>开篇词 | 想成为技术牛人？先搞定网络协议！</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/02.第一模块通信协议综述">02.第一模块通信协议综述</a><ul><li><a href="/blog-base/趣谈网络协议/02.第一模块通信协议综述/01"><span>第1讲 | 为什么要学习网络协议？</span></a></li><li><a href="/blog-base/趣谈网络协议/02.第一模块通信协议综述/02"><span>第2讲 | 网络分层的真实含义是什么？</span></a></li><li><a href="/blog-base/趣谈网络协议/02.第一模块通信协议综述/03"><span>第3讲 | ifconfig：最熟悉又陌生的命令行</span></a></li><li><a href="/blog-base/趣谈网络协议/02.第一模块通信协议综述/04"><span>第4讲 | DHCP与PXE：IP是怎么来的，又是怎么没的？</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/03.第二模块底层网络知识详解从二层到三层">03.第二模块底层网络知识详解从二层到三层</a><ul><li><a href="/blog-base/趣谈网络协议/03.第二模块底层网络知识详解从二层到三层/01"><span>第5讲 | 从物理层到MAC层：如何在宿舍里自己组网玩联机游戏？</span></a></li><li><a href="/blog-base/趣谈网络协议/03.第二模块底层网络知识详解从二层到三层/02"><span>第6讲 | 交换机与VLAN：办公室太复杂，我要回学校</span></a></li><li><a href="/blog-base/趣谈网络协议/03.第二模块底层网络知识详解从二层到三层/03"><span>第7讲 | ICMP与ping：投石问路的侦察兵</span></a></li><li><a href="/blog-base/趣谈网络协议/03.第二模块底层网络知识详解从二层到三层/04"><span>第8讲 | 世界这么大，我想出网关：欧洲十国游与玄奘西行</span></a></li><li><a href="/blog-base/趣谈网络协议/03.第二模块底层网络知识详解从二层到三层/05"><span>第9讲 | 路由协议：西出网关无故人，敢问路在何方</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/04.第二模块底层网络知识详解最重要的传输层">04.第二模块底层网络知识详解最重要的传输层</a><ul><li><a href="/blog-base/趣谈网络协议/04.第二模块底层网络知识详解最重要的传输层/01"><span>第10讲 | UDP协议：因性善而简单，难免碰到“城会玩”</span></a></li><li><a href="/blog-base/趣谈网络协议/04.第二模块底层网络知识详解最重要的传输层/02"><span>第11讲 | TCP协议（上）：因性恶而复杂，先恶后善反轻松</span></a></li><li><a href="/blog-base/趣谈网络协议/04.第二模块底层网络知识详解最重要的传输层/03"><span>第12讲 | TCP协议（下）：西行必定多妖孽，恒心智慧消磨难</span></a></li><li><a href="/blog-base/趣谈网络协议/04.第二模块底层网络知识详解最重要的传输层/04"><span>第13讲 | 套接字Socket：Talk is cheap, show me the code</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层">05.第二模块底层网络知识详解最常用的应用层</a><ul><li><a href="/blog-base/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/01"><span>第14讲 | HTTP协议：看个新闻原来这么麻烦</span></a></li><li><a href="/blog-base/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/02"><span>第15讲 | HTTPS协议：点外卖的过程原来这么复杂</span></a></li><li><a href="/blog-base/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/03"><span>第16讲 | 流媒体协议：如何在直播里看到美女帅哥？</span></a></li><li><a href="/blog-base/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04"><span>第17讲 | P2P协议：我下小电影，99%急死你</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心">06.第二模块底层网络知识详解陌生的数据中心</a><ul><li><a href="/blog-base/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/01"><span>第18讲 | DNS协议：网络世界的地址簿</span></a></li><li><a href="/blog-base/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/02"><span>第19讲 | HttpDNS：网络世界的地址簿也会指错路</span></a></li><li><a href="/blog-base/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/03"><span>第20讲 | CDN：你去小卖部取过快递么？</span></a></li><li><a href="/blog-base/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/04"><span>第21讲 | 数据中心：我是开发商，自己拿地盖别墅</span></a></li><li><a href="/blog-base/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/05"><span>第22讲 | VPN：朝中有人好做官</span></a></li><li><a href="/blog-base/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/06"><span>第23讲 | 移动网络：去巴塞罗那，手机也上不了脸书</span></a></li></ul></li><li><a aria-current="page" class="active" href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络">07.第三模块热门技术中的应用云计算中的网络</a><ul><li><a href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/01"><span>第24讲 | 云中网络：自己拿地成本高，购买公寓更灵活</span></a></li><li><a aria-current="page" class="active" href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/02"><span>第25讲 | 软件定义网络：共享基础设施的小区物业管理办法</span></a></li><li><a href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/03"><span>第26讲 | 云中的网络安全：虽然不是土豪，也需要基本安全和保障</span></a></li><li><a href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/04"><span>第27讲 | 云中的网络QoS：邻居疯狂下电影，我该怎么办？</span></a></li><li><a href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/05"><span>第28讲 | 云中网络的隔离GRE、VXLAN：虽然住一个小区，也要保护隐私</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/08.第三模块热门技术中的应用容器技术中的网络">08.第三模块热门技术中的应用容器技术中的网络</a><ul><li><a href="/blog-base/趣谈网络协议/08.第三模块热门技术中的应用容器技术中的网络/01"><span>第29讲 | 容器网络：来去自由的日子，不买公寓去合租</span></a></li><li><a href="/blog-base/趣谈网络协议/08.第三模块热门技术中的应用容器技术中的网络/02"><span>第30讲 | 容器网络之Flannel：每人一亩三分地</span></a></li><li><a href="/blog-base/趣谈网络协议/08.第三模块热门技术中的应用容器技术中的网络/03"><span>第31讲 | 容器网络之Calico：为高效说出善意的谎言</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/09.第三模块热门技术中的应用微服务相关协议">09.第三模块热门技术中的应用微服务相关协议</a><ul><li><a href="/blog-base/趣谈网络协议/09.第三模块热门技术中的应用微服务相关协议/01"><span>第32讲 | RPC协议综述：远在天边，近在眼前</span></a></li><li><a href="/blog-base/趣谈网络协议/09.第三模块热门技术中的应用微服务相关协议/02"><span>第33讲 | 基于XML的SOAP协议：不要说NBA，请说美国职业篮球联赛</span></a></li><li><a href="/blog-base/趣谈网络协议/09.第三模块热门技术中的应用微服务相关协议/03"><span>第34讲 | 基于JSON的RESTful接口协议：我不关心过程，请给我结果</span></a></li><li><a href="/blog-base/趣谈网络协议/09.第三模块热门技术中的应用微服务相关协议/04"><span>第35讲 | 二进制类RPC协议：还是叫NBA吧，总说全称多费劲</span></a></li><li><a href="/blog-base/趣谈网络协议/09.第三模块热门技术中的应用微服务相关协议/05"><span>第36讲 | 跨语言类RPC协议：交流之前，双方先来个专业术语表</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/10.第四模块网络协议知识串讲">10.第四模块网络协议知识串讲</a><ul><li><a href="/blog-base/趣谈网络协议/10.第四模块网络协议知识串讲/01"><span>第37讲 | 知识串讲：用双十一的故事串起碎片的网络协议（上）</span></a></li><li><a href="/blog-base/趣谈网络协议/10.第四模块网络协议知识串讲/02"><span>第38讲 | 知识串讲：用双十一的故事串起碎片的网络协议（中）</span></a></li><li><a href="/blog-base/趣谈网络协议/10.第四模块网络协议知识串讲/03"><span>第39讲 | 知识串讲：用双十一的故事串起碎片的网络协议（下）</span></a></li><li><a href="/blog-base/趣谈网络协议/10.第四模块网络协议知识串讲/04"><span>第40讲 | 搭建一个网络实验环境：授人以鱼不如授人以渔</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/11.答疑与加餐">11.答疑与加餐</a><ul><li><a href="/blog-base/趣谈网络协议/11.答疑与加餐/01"><span>协议专栏特别福利 | 答疑解惑第一期</span></a></li><li><a href="/blog-base/趣谈网络协议/11.答疑与加餐/02"><span>协议专栏特别福利 | 答疑解惑第二期</span></a></li><li><a href="/blog-base/趣谈网络协议/11.答疑与加餐/03"><span>协议专栏特别福利 | 答疑解惑第三期</span></a></li><li><a href="/blog-base/趣谈网络协议/11.答疑与加餐/04"><span>协议专栏特别福利 | 答疑解惑第四期</span></a></li><li><a href="/blog-base/趣谈网络协议/11.答疑与加餐/05"><span>协议专栏特别福利 | 答疑解惑第五期</span></a></li><li><a href="/blog-base/趣谈网络协议/11.答疑与加餐/06"><span>加餐1 | 创作故事：我是如何创作“趣谈网络协议”专栏的？</span></a></li><li><a href="/blog-base/趣谈网络协议/11.答疑与加餐/07"><span>加餐2 | “趣谈网络协议”专栏食用指南</span></a></li><li><a href="/blog-base/趣谈网络协议/11.答疑与加餐/08"><span>第2季回归 | 这次我们来“趣谈Linux操作系统”</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/12.结束语">12.结束语</a><ul><li><a href="/blog-base/趣谈网络协议/12.结束语/01"><span>结束语 | 放弃完美主义，执行力就是限时限量认真完成</span></a></li><li><a href="/blog-base/趣谈网络协议/12.结束语/02"><span>结课测试 | 这些网络协议你都掌握了吗？</span></a></li></ul></li><li><a href="/blog-base/趣谈网络协议/summary">趣谈网络协议</a></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="软件定义网络（SDN）" data-depth="2"><a href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/02#软件定义网络sdn"><span>软件定义网络（SDN）</span></a></li><li title="OpenFlow和OpenvSwitch" data-depth="2"><a href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/02#openflow和openvswitch"><span>OpenFlow和OpenvSwitch</span></a></li><li title="实验一：用OpenvSwitch实现VLAN的功能" data-depth="2"><a href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/02#实验一用openvswitch实现vlan的功能"><span>实验一：用OpenvSwitch实现VLAN的功能</span></a></li><li title="实验二：用OpenvSwitch模拟网卡绑定，连接交换机" data-depth="2"><a href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/02#实验二用openvswitch模拟网卡绑定连接交换机"><span>实验二：用OpenvSwitch模拟网卡绑定，连接交换机</span></a></li><li title="如何在云计算中使用OpenvSwitch？" data-depth="2"><a href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/02#如何在云计算中使用openvswitch"><span>如何在云计算中使用OpenvSwitch？</span></a></li><li title="小结" data-depth="2"><a href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/02#小结"><span>小结</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="第25讲--软件定义网络共享基础设施的小区物业管理办法"><a aria-hidden="true" tabindex="-1" href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/02#第25讲--软件定义网络共享基础设施的小区物业管理办法"><span class="icon icon-link"></span></a>第25讲 | 软件定义网络：共享基础设施的小区物业管理办法</h1><p>上一节我们说到，使用原生的VLAN和Linux网桥的方式来进行云平台的管理，但是这样在灵活性、隔离性方面都显得不足，而且整个网络缺少统一的视图、统一的管理。</p><p>可以这样比喻，云计算就像大家一起住公寓，要共享小区里面的基础设施，其中网络就相当于小区里面的电梯、楼道、路、大门等，大家都走，往往会常出现问题，尤其在上班高峰期，出门的人太多，对小区的物业管理就带来了挑战。</p><p>物业可以派自己的物业管理人员，到每个单元的楼梯那里，将电梯的上下行速度调快一点，可以派人将隔离健身区、景色区的栅栏门暂时打开，让大家可以横穿小区，直接上地铁，还可以派人将多个小区出入口，改成出口多、入口少等等。等过了十点半，上班高峰过去，再派人都改回来。</p><h2 id="软件定义网络sdn"><a aria-hidden="true" tabindex="-1" href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/02#软件定义网络sdn"><span class="icon icon-link"></span></a>软件定义网络（SDN）</h2><p>这种模式就像传统的网络设备和普通的Linux网桥的模式，配置整个云平台的网络通路，你需要登录到这台机器上配置这个，再登录到另外一个设备配置那个，才能成功。</p><p>如果物业管理人员有一套智能的控制系统，在物业监控室里就能看到小区里每个单元、每个电梯的人流情况，然后在监控室里面，只要通过远程控制的方式，拨弄一个手柄，电梯的速度就调整了，栅栏门就打开了，某个入口就改出口了。</p><p>这就是软件定义网络（SDN）。它主要有以下三个特点。</p><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimage34f9346fe3b3dbe1024e7119ec4ffa9377f9.f106bcb1.jpg" alt=""/></p><ul><li><p><strong>控制与转发分离</strong>：转发平面就是一个个虚拟或者物理的网络设备，就像小区里面的一条条路。控制平面就是统一的控制中心，就像小区物业的监控室。它们原来是一起的，物业管理员要从监控室出来，到路上去管理设备，现在是分离的，路就是走人的，控制都在监控室。</p></li><li><p><strong>控制平面与转发平面之间的开放接口</strong>：控制器向上提供接口，被应用层调用，就像总控室提供按钮，让物业管理员使用。控制器向下调用接口，来控制网络设备，就像总控室会远程控制电梯的速度。这里经常使用两个名词，前面这个接口称为<strong>北向接口</strong>，后面这个接口称为<strong>南向接口</strong>，上北下南嘛。</p></li><li><p><strong>逻辑上的集中控制</strong>：逻辑上集中的控制平面可以控制多个转发面设备，也就是控制整个物理网络，因而可以获得全局的网络状态视图，并根据该全局网络状态视图实现对网络的优化控制，就像物业管理员在监控室能够看到整个小区的情况，并根据情况优化出入方案。</p></li></ul><h2 id="openflow和openvswitch"><a aria-hidden="true" tabindex="-1" href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/02#openflow和openvswitch"><span class="icon icon-link"></span></a>OpenFlow和OpenvSwitch</h2><p>SDN有很多种实现方式，我们来看一种开源的实现方式。</p><p>OpenFlow是SDN控制器和网络设备之间互通的南向接口协议，OpenvSwitch用于创建软件的虚拟交换机。OpenvSwitch是支持OpenFlow协议的，当然也有一些硬件交换机也支持OpenFlow协议。它们都可以被统一的SDN控制器管理，从而实现物理机和虚拟机的网络连通。</p><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimage2215220b53c0f027763yy54c1a08yy2e5a15.9afba60b.jpg" alt=""/></p><p>SDN控制器是如何通过OpenFlow协议控制网络的呢？</p><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimage1c781c739b9ecc23e9b7c246136782fcd078.df567429.jpg" alt=""/></p><p>在OpenvSwitch里面，有一个流表规则，任何通过这个交换机的包，都会经过这些规则进行处理，从而接收、转发、放弃。</p><p>那流表长啥样呢？其实就是一个个表格，每个表格好多行，每行都是一条规则。每条规则都有优先级，先看高优先级的规则，再看低优先级的规则。</p><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimage312f314c82553a164444437b25b215fa012f.7d28b73b.jpg" alt=""/></p><p>对于每一条规则，要看是否满足匹配条件。这些条件包括，从哪个端口进来的，网络包头里面有什么等等。满足了条件的网络包，就要执行一个动作，对这个网络包进行处理。可以修改包头里的内容，可以跳到任何一个表格，可以转发到某个网口出去，也可以丢弃。</p><p>通过这些表格，可以对收到的网络包随意处理。</p><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimage8e1a8e8751005253a47a823f08d6ac6cfc1a.e8868ef2.jpg" alt=""/></p><p>具体都能做什么处理呢？通过上面的表格可以看出，简直是想怎么处理怎么处理，可以覆盖TCP/IP协议栈的四层。</p><p>对于物理层：</p><ul><li><p>匹配规则包括从哪个口进来；</p></li><li><p>执行动作包括从哪个口出去。</p></li></ul><p>对于MAC层：</p><ul><li><p>匹配规则包括：源MAC地址是多少？（dl_src），目标MAC是多少？（dl_dst），所属vlan是多少？（dl_vlan）；</p></li><li><p>执行动作包括：修改源MAC（mod_dl_src），修改目标MAC（mod_dl_dst），修改VLAN（mod_vlan_vid），删除VLAN（strip_vlan），MAC地址学习（learn）。</p></li></ul><p>对于网络层：</p><ul><li><p>匹配规则包括：源IP地址是多少？(nw_src)，目标IP是多少？（nw_dst）。</p></li><li><p>执行动作包括：修改源IP地址（mod_nw_src），修改目标IP地址（mod_nw_dst）。</p></li></ul><p>对于传输层：</p><ul><li><p>匹配规则包括：源端口是多少？（tp_src），目标端口是多少？（tp_dst）。</p></li><li><p>执行动作包括：修改源端口（mod_tp_src），修改目标端口（mod_tp_dst）。</p></li></ul><p>总而言之，对于OpenvSwitch来讲，网络包到了我手里，就是一个Buffer，我想怎么改怎么改，想发到哪个端口就发送到哪个端口。</p><p>OpenvSwitch有本地的命令行可以进行配置，能够实验咱们前面讲过的一些功能。我们可以通过OpenvSwitch的命令创建一个虚拟交换机。然后可以将多个虚拟端口port添加到这个虚拟交换机上。比如说下面这个add-br命令，就是创建虚拟交换机的。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">ovs-vsctl add-br br0</span></div></pre></div><h2 id="实验一用openvswitch实现vlan的功能"><a aria-hidden="true" tabindex="-1" href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/02#实验一用openvswitch实现vlan的功能"><span class="icon icon-link"></span></a>实验一：用OpenvSwitch实现VLAN的功能</h2><p>下面我们实验一下通过OpenvSwitch实现VLAN的功能，在OpenvSwitch中端口port分两种，分别叫做access port和trunk port。</p><p>第一类是access port：</p><ul><li>这个端口可以配置一个tag，其实就是一个VLAN ID，从这个端口进来的包都会被打上这个tag；</li><li>如果网络包本身带有某个VLAN ID并且等于这个tag，则这个包就会从这个port发出去；</li><li>从access port发出的包就会把VLAN ID去掉。</li></ul><p>第二类是trunk port：</p><ul><li>这个port是不配置任何tag的，配置叫trunks的参数；</li><li>如果trunks为空，则所有的VLAN都trunk，也就意味着对于所有的VLAN的包，无论本身带什么VLAN ID，我还是让他携带着这个VLAN ID，如果没有设置VLAN，就属于VLAN 0，全部允许通过；</li><li>如果trunks不为空，则仅仅允许带着这些VLAN ID的包通过。</li></ul><p>我们通过以下命令创建如下的环境：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">ovs-vsctl add-port br0 first_br</span></div><div class="token-line"><span class="token plain">    ovs-vsctl add-port br0 second_br</span></div><div class="token-line"><span class="token plain">    ovs-vsctl add-port br0 third_br</span></div><div class="token-line"><span class="token plain">    ovs-vsctl set Port vnet0 tag=101</span></div><div class="token-line"><span class="token plain">    ovs-vsctl set Port vnet1 tag=102</span></div><div class="token-line"><span class="token plain">    ovs-vsctl set Port vnet2 tag=103</span></div><div class="token-line"><span class="token plain">    ovs-vsctl set Port first_br tag=103</span></div><div class="token-line"><span class="token plain">    ovs-vsctl clear Port second_br tag</span></div><div class="token-line"><span class="token plain">    ovs-vsctl set Port third_br trunks=101,102</span></div></pre></div><p>另外要配置禁止MAC地址学习。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">ovs-vsctl set bridge br0 flood-vlans=101,102,103</span></div></pre></div><p>这样就形成了如下的拓扑图，有三个虚拟机，有三个网卡，都连到一个叫br0的网桥上，并且他们被都打了不同的VLAN tag。</p><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimage8f088ffb2a94ae0393f1785f8fefd5ea5908.4046773e.jpg" alt=""/></p><p>创建好了环境以后，我们来做这个实验。</p><p>首先，我们从192.168.100.102来ping 192.168.100.103，然后用tcpdump进行抓包。由于192.168.100.102和first_br都配置了tag103，也就是说他们都属于同一个VLAN 103的，因而这个first_if是能够收到包的。但是根据access port的规则，从first_br出来的包头是没有带VLAN ID的。</p><p>由于second_br是trunk port，所有的VLAN都会放行，因而second_if也是能收到包的，并且根据trunk port的规则，出来的包的包头里面是带有VLAN ID的。</p><p>由于third_br仅仅配置了允许VLAN 101和102通过，不允许103通过，因而third_if他是收不到包的。</p><p>然后我们再尝试，从192.168.100.100来ping 192.168.100.105。 因为192.168.100.100是配置了VLAN 101的，因为second_br是配置了trunk的，是全部放行的，所以说second_if是可以收到包的。那third_br是配置了可以放行VLAN 101和102，所以说third_if是可以收到包的。当然ping不通，因为从third_br出来的包是带VLAN的，而third_if他本身不属于某个VLAN，所以说他ping不通，但是能够收到包</p><p>这里补充说明一下，收到包和ping不同不矛盾，要想ping的通，需要发送ICMP包，并且收到回复，而仅仅收到包，则不需要回复。这里正是这种情况，third_if收到了这个包，但是发现VLAN ID匹配不上，就会把包丢了，不回复，也就Ping不通了。</p><p>first_br是属于VLAN 103的，因而first_if是收不到包的。second_if是能够收到包的，而且可以看到包头里面是带VLAN 101的。third_if也是能收到包的，而且包头里面也是带VLAN I101的。</p><p>最后我们再尝试，从192.168.100.101来ping 192.168.100.104，因为192.168.100.101是属于VLAN 102的， 因而second_if和third_if都因为配置了trunk，是都可以收到包的。first_br是属于VLAN 103的，他不属于VLAN 102，所以first_if是收不到包的。second_br能够收到包，并且包头里面是带VLAN ID 102的。third_if也能收到包，并且包头里面也是带VLAN ID 102的。</p><p>通过这个例子，我们可以看到，通过OpenvSwitch，不用买一个支持VLAN的交换机，你也能学习VLAN的工作模式了。</p><h2 id="实验二用openvswitch模拟网卡绑定连接交换机"><a aria-hidden="true" tabindex="-1" href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/02#实验二用openvswitch模拟网卡绑定连接交换机"><span class="icon icon-link"></span></a>实验二：用OpenvSwitch模拟网卡绑定，连接交换机</h2><p>接下来，我们来做另一个实验。在前面，我们还说过，为了高可用，可以使用网卡绑定，连接到交换机，OpenvSwitch也可以模拟这一点。</p><p>在OpenvSwitch里面，有个bond_mode，可以设置为以下三个值：</p><ul><li><p>active-backup：一个连接是active，其他的是backup，只有当active失效的时候，backup才顶上；</p></li><li><p>balance-slb：流量按照源MAC和output VLAN进行负载均衡；</p></li><li><p>balance-tcp：必须在支持LACP协议的情况下才可以，可根据L2、L3、L4进行负载均衡（L2、L3、L4指的是网络协议2、3、4层）</p></li></ul><p>我们搭建一个测试环境。这个测试环境是两台虚拟机连接到br0上，另外两台虚拟机连接到br1上，br0和br1之间通过两条通路进行bond（绑定）。形成如下的拓扑图。</p><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimaged2ced2381bd12ab8620c64249f05fd7d19ce.83c280d0.jpg" alt=""/></p><p>我们使用下面的命令，建立bond连接。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">ovs-vsctl add-bond br0 bond0 first_br second_br</span></div><div class="token-line"><span class="token plain">    ovs-vsctl add-bond br1 bond1 first_if second_if</span></div><div class="token-line"><span class="token plain">    ovs-vsctl set Port bond0 lacp=active</span></div><div class="token-line"><span class="token plain">    ovs-vsctl set Port bond1 lacp=active</span></div></pre></div><p>默认情况下bond_mode是active-backup模式，一开始active的是左面这条路，也即first_br和first_if这条路。</p><p>这个时候如果我们从192.168.100.100 来ping 192.168.100.102，以及从192.168.100.101 来ping 192.168.100.103的时候，我从tcpdump可以看到所有的包都是从first_if这条路通过。</p><p>接下来，如果我们把first_if这个网卡设成down的模式，则包的走向就会改变，你会发现second_if这条路开始有流量了，对于192.168.100.100和192.168.100.101从应用层来讲，感觉似乎没有收到影响。</p><p>如果我们通过以下命令，把bond_mode改为balance-slb。然后我们同时在192.168.100.100 来ping 192.168.100.102，同时也在192.168.100.101 来ping 192.168.100.103，我们通过tcpdump会发现，包已经被分流了。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">ovs-vsctl set Port bond0 bond_mode=balance-slb</span></div><div class="token-line"><span class="token plain">    ovs-vsctl set Port bond1 bond_mode=balance-slb</span></div></pre></div><p>通过这个例子，我们可以看到，通过OpenvSwitch，你不用买两台支持bond的交换机，也能看到bond的效果。</p><p>那OpenvSwitch是怎么做到这些的呢？我们来看OpenvSwitch的架构图。</p><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimagef38df31c81e1cee4b51a3117be9a94494c8d.7789f397.jpg" alt=""/></p><p>OpenvSwitch包含很多的模块，在用户态有两个重要的进程，也有两个重要的命令行工具。</p><ul><li><p>第一个进程是OVSDB进程。ovs-vsctl命令行会和这个进程通信，去创建虚拟交换机，创建端口，将端口添加到虚拟交换机上，OVSDB会将这些拓扑信息保存在一个本地的文件中。</p></li><li><p>第二个进程是vswitchd进程。ovs-ofctl命令行会和这个进程通信，去下发流表规则，规则里面会规定如何对网络包进行处理，vswitchd会将流表放在用户态Flow Table中。</p></li></ul><p>在内核态，OpenvSwitch有内核模块OpenvSwitch.ko，对应图中的Datapath部分。他会在网卡上注册一个函数，每当有网络包到达网卡的时候，这个函数就会被调用。</p><p>在内核的这个函数里面，会拿到网络包，将各个层次的重要信息拿出来，例如：</p><ul><li><p>在物理层，会拿到in_port，即包是从哪个网口进来的。；</p></li><li><p>在MAC层，会拿到源和目的MAC地址；</p></li><li><p>在IP层，会拿到源和目的IP地址；</p></li><li><p>在传输层，会拿到源和目的端口号。</p></li></ul><p>在内核中，还有一个内核态Flow Table。接下来内核态模块在这个内核态的流表中匹配规则，如果匹配上了，就执行相应的操作，比如修改包，或者转发，或者放弃。如果内核没有匹配上，这个时候就需要进入用户态，用户态和内核态之间通过Linux的一个机制叫Netlink，来进行相互通信。</p><p>内核通过upcall，告知用户态进程vswitchd，在用户态的Flow Table里面去匹配规则，这里面的规则是全量的流表规则，而内核态的Flow Table只是为了做快速处理，保留了部分规则，内核里面的规则过一段时间就会过期。</p><p>当在用户态匹配到了流表规则之后，就在用户态执行操作，同时将这个匹配成功的流表通过reinject下发到内核，从而接下来的包都能在内核找到这个规则，来进行转发。</p><p>这里调用openflow协议的，是本地的命令行工具。当然你也可以是远程的SDN控制器来进行控制，一个重要的SDN控制器是OpenDaylight。</p><p>下面这个图就是OpenDaylight中看到的拓扑图。是不是有种物业管理员在监控室里的感觉？</p><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimage27a8274442ba251fdc63c88bc5dbfc6183a8.3f09d567.jpg" alt=""/></p><p>我们可以通过在OpenDaylight里，将两个交换机之间配置通，也可以配置不通，还可以配置一个虚拟IP地址为VIP，在不同的机器之间实现负载均衡等等，所有的策略都可以灵活配置。</p><h2 id="如何在云计算中使用openvswitch"><a aria-hidden="true" tabindex="-1" href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/02#如何在云计算中使用openvswitch"><span class="icon icon-link"></span></a>如何在云计算中使用OpenvSwitch？</h2><p>OpenvSwitch这么牛，如何用在云计算中呢？</p><p><img src="/blog-base/static/httpsstatic001geekbangorgresourceimage8d3b8d48c13d3765f00a62a726d8aed1203b.477d5dd6.jpg" alt=""/></p><p>我们还是讨论VLAN的场景。</p><p>在没有OpenvSwitch的时候，如果一个新的用户要使用一个新的VLAN，就需要创建一个属于新的VLAN的虚拟网卡，并且为这个租户创建一个单独的虚拟网桥，这样用户越来越多的时候，虚拟网卡和虚拟网桥会越来越多，管理就越来越复杂。</p><p>另一个问题是虚拟机的VLAN和物理环境的VLAN是透传的，也即从一开始规划的时候，这两个就需要匹配起来，将物理环境和虚拟环境强绑定，这样本来就不灵活。</p><p>而引入了OpenvSwitch，状态就得到了改观。</p><p>首先，由于OpenvSwitch本身就是支持VLAN的，这样所有的虚拟机都可以放在一个网桥br0上，通过不同的用户配置不同的tag，就能够实现隔离。例如上面的图左面的部分，用户A的虚拟机都在br0上，用户B的虚拟机都在br1上，有了OpenvSwitch，就可以都放在br0上，只是设置了不同的tag就可以了。</p><p>另外，还可以创建一个虚拟交换机br1，将物理网络和虚拟网络进行隔离。物理网络有物理网络的VLAN规划，虚拟机在一台物理机上，所有的VLAN都可以从1开始。由于一台物理机上的虚拟机肯定不会超过4096个，所以VLAN在一台物理机上如果从1开始，肯定够用了。例如在图中右面部分的上面的那台物理机里面，用户A被分配的tag是1，用户B被分配的tag是2，而在下面的物理机里面，用户A被分配的tag是7，用户B被分配的tag是6。</p><p>如果物理机之间的通信和隔离还是通过VLAN的话，需要将虚拟机的VLAN和物理环境的VLAN对应起来，但为了灵活性，不一定一致，这样可以实现分别管理物理机的网络和虚拟机的网络。好在OpenvSwitch可以对包的内容进行修改。例如通过匹配dl_vlan，然后执行mod_vlan_vid来改变进进出出物理机的网络包。</p><p>尽管租户多了，物理环境的VLAN还是不够用，但是有了OpenvSwitch的映射，将物理和虚拟解耦，从而可以让物理环境使用其他技术，而不影响虚拟机环境，这个我们后面再讲。</p><h2 id="小结"><a aria-hidden="true" tabindex="-1" href="/blog-base/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/02#小结"><span class="icon icon-link"></span></a>小结</h2><p>好了，这一节就到这里了，我们来总结一下：</p><ul><li><p>用SDN控制整个云里面的网络，就像小区保安从总控室管理整个物业是一样的，将控制面和数据面进行了分离；</p></li><li><p>一种开源的虚拟交换机的实现OpenvSwitch，它能对经过自己的包做任意修改，从而使得云对网络的控制十分灵活；</p></li><li><p>将OpenvSwitch引入了云之后，可以使得配置简单而灵活，并且可以解耦物理网络和虚拟网络。</p></li></ul><p>最后，给你留两个思考题：</p><ol><li><p>在这一节中，提到了通过VIP可以通过流表在不同的机器之间实现复杂均衡，你知道怎样才能做到吗？</p></li><li><p>虽然OpenvSwitch可以解耦物理网络和虚拟网络，但是在物理网络里面使用VLAN，数目还是不够，你知道该怎么办吗？</p></li></ol><p>我们的专栏更新到第25讲，不知你掌握得如何？每节课后我留的思考题，你都有没有认真思考，并在留言区写下答案呢？我会从<strong>已发布的文章中选出一批认真留言的同学</strong>，赠送学习奖励礼券和我整理的独家网络协议知识图谱。</p><p>欢迎你留言和我讨论。趣谈网络协议，我们下期见！</p></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/GGwujun/blog/edit/master/ssrc/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/02.md">在 GitHub 上编辑此页<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="最后更新时间：">2023/9/23 20:27:01</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "//www.google-analytics.com/analytics.js",
            "ga"
          );
          ga("create", "UA-149864185-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="/blog-base/umi.js"></script>
  </body>
</html>
