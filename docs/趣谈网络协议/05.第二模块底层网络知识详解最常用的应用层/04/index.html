<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="/logo.png" />
    <link rel="stylesheet" href="/blog/umi.css" />
    <script>
      window.routerBase = "/blog";
    </script>
    <script>
      //! umi version: 3.5.41
    </script>
    <script>
      !(function () {
        var e =
            navigator.cookieEnabled && void 0 !== window.localStorage
              ? localStorage.getItem("dumi:prefers-color")
              : "auto",
          o = window.matchMedia("(prefers-color-scheme: dark)").matches,
          t = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === t[2] ? (o ? t[1] : t[0]) : t.indexOf(e) > -1 ? e : t[0]
        );
      })();
    </script>
    <title>第17讲 | P2P协议：我下小电影，99%急死你 - 大师兄</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog/">大师兄</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span>计算机基础<ul><li><a href="/blog/编译原理之美">编译原理之美</a></li><li><a href="/blog/编译原理实战">编译原理实战</a></li><li><a href="/blog/深入浅出计算机组成原理">深入浅出计算机组成原理</a></li><li><a href="/blog/详解http">详解http</a></li><li><a href="/blog/计算机网络通关29讲">计算机网络通关29讲</a></li><li><a href="/blog/网络排查案例课">网络排查案例课</a></li><li><a href="/blog/linux操作系统">linux操作系统</a></li><li><a href="/blog/linux内核技术实战课">linux内核技术实战课</a></li><li><a href="/blog/linux性能优化实战">linux性能优化实战</a></li><li><a href="/blog/程序员数学基础">程序员数学基础</a></li><li><a aria-current="page" class="active" href="/blog/趣谈网络协议">趣谈网络协议</a></li><li><a href="/blog/操作系统实战">操作系统实战</a></li><li><a href="/blog/软件工程之美">软件工程之美</a></li><li><a href="/blog/sql必知必会">sql必知必会</a></li><li><a href="/blog/操作系统实战45讲">操作系统实战45讲</a></li><li><a href="/blog/网络编程实战">网络编程实战</a></li><li><a href="/blog/趣谈linux操作系统">趣谈linux操作系统</a></li></ul></span><span>算法<ul><li><a href="/blog/常用算法25讲">常用算法25讲</a></li><li><a href="/blog/数据结构与算法之美">数据结构与算法之美</a></li><li><a href="/blog/业务开发算法50讲">业务开发算法50讲</a></li><li><a href="/blog/动态规划面试宝典">动态规划面试宝典</a></li></ul></span><span>前端开发<ul><li><a href="/blog/全栈工程师修炼指南">全栈工程师修炼指南</a></li><li><a href="/blog/正则表达式入门">正则表达式入门</a></li></ul></span><span>前端工程化</span><span>前端性能优化</span><span>移动端开发</span><span>软件测试</span><span>产品与用户体验</span><span>面试</span><span>杂谈<ul><li><a href="/blog/代码之丑">代码之丑</a></li><li><a href="/blog/代码精进之路">代码精进之路</a></li><li><a href="/blog/数据分析思维课">数据分析思维课</a></li><li><a href="/blog/朱涛kotlin编程第一课">朱涛kotlin编程第一课</a></li><li><a href="/blog/重学线性代数">重学线性代数</a></li></ul></span><div class="__dumi-default-navbar-tool"><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog/"></a><h1>大师兄</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li>计算机基础<ul><li><a href="/blog/编译原理之美">编译原理之美</a></li><li><a href="/blog/编译原理实战">编译原理实战</a></li><li><a href="/blog/深入浅出计算机组成原理">深入浅出计算机组成原理</a></li><li><a href="/blog/详解http">详解http</a></li><li><a href="/blog/计算机网络通关29讲">计算机网络通关29讲</a></li><li><a href="/blog/网络排查案例课">网络排查案例课</a></li><li><a href="/blog/linux操作系统">linux操作系统</a></li><li><a href="/blog/linux内核技术实战课">linux内核技术实战课</a></li><li><a href="/blog/linux性能优化实战">linux性能优化实战</a></li><li><a href="/blog/程序员数学基础">程序员数学基础</a></li><li><a aria-current="page" class="active" href="/blog/趣谈网络协议">趣谈网络协议</a></li><li><a href="/blog/操作系统实战">操作系统实战</a></li><li><a href="/blog/软件工程之美">软件工程之美</a></li><li><a href="/blog/sql必知必会">sql必知必会</a></li><li><a href="/blog/操作系统实战45讲">操作系统实战45讲</a></li><li><a href="/blog/网络编程实战">网络编程实战</a></li><li><a href="/blog/趣谈linux操作系统">趣谈linux操作系统</a></li></ul></li><li>算法<ul><li><a href="/blog/常用算法25讲">常用算法25讲</a></li><li><a href="/blog/数据结构与算法之美">数据结构与算法之美</a></li><li><a href="/blog/业务开发算法50讲">业务开发算法50讲</a></li><li><a href="/blog/动态规划面试宝典">动态规划面试宝典</a></li></ul></li><li>前端开发<ul><li><a href="/blog/全栈工程师修炼指南">全栈工程师修炼指南</a></li><li><a href="/blog/正则表达式入门">正则表达式入门</a></li></ul></li><li>前端工程化</li><li>前端性能优化</li><li>移动端开发</li><li>软件测试</li><li>产品与用户体验</li><li>面试</li><li>杂谈<ul><li><a href="/blog/代码之丑">代码之丑</a></li><li><a href="/blog/代码精进之路">代码精进之路</a></li><li><a href="/blog/数据分析思维课">数据分析思维课</a></li><li><a href="/blog/朱涛kotlin编程第一课">朱涛kotlin编程第一课</a></li><li><a href="/blog/重学线性代数">重学线性代数</a></li></ul></li></ul><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a href="/blog/趣谈网络协议">趣谈网络协议</a></li><li><a href="/blog/趣谈网络协议/01.开篇词">01.开篇词</a><ul><li><a href="/blog/趣谈网络协议/01.开篇词/01"><span>开篇词 | 想成为技术牛人？先搞定网络协议！</span></a></li></ul></li><li><a href="/blog/趣谈网络协议/02.第一模块通信协议综述">02.第一模块通信协议综述</a><ul><li><a href="/blog/趣谈网络协议/02.第一模块通信协议综述/01"><span>第1讲 | 为什么要学习网络协议？</span></a></li><li><a href="/blog/趣谈网络协议/02.第一模块通信协议综述/02"><span>第2讲 | 网络分层的真实含义是什么？</span></a></li><li><a href="/blog/趣谈网络协议/02.第一模块通信协议综述/03"><span>第3讲 | ifconfig：最熟悉又陌生的命令行</span></a></li><li><a href="/blog/趣谈网络协议/02.第一模块通信协议综述/04"><span>第4讲 | DHCP与PXE：IP是怎么来的，又是怎么没的？</span></a></li></ul></li><li><a href="/blog/趣谈网络协议/03.第二模块底层网络知识详解从二层到三层">03.第二模块底层网络知识详解从二层到三层</a><ul><li><a href="/blog/趣谈网络协议/03.第二模块底层网络知识详解从二层到三层/01"><span>第5讲 | 从物理层到MAC层：如何在宿舍里自己组网玩联机游戏？</span></a></li><li><a href="/blog/趣谈网络协议/03.第二模块底层网络知识详解从二层到三层/02"><span>第6讲 | 交换机与VLAN：办公室太复杂，我要回学校</span></a></li><li><a href="/blog/趣谈网络协议/03.第二模块底层网络知识详解从二层到三层/03"><span>第7讲 | ICMP与ping：投石问路的侦察兵</span></a></li><li><a href="/blog/趣谈网络协议/03.第二模块底层网络知识详解从二层到三层/04"><span>第8讲 | 世界这么大，我想出网关：欧洲十国游与玄奘西行</span></a></li><li><a href="/blog/趣谈网络协议/03.第二模块底层网络知识详解从二层到三层/05"><span>第9讲 | 路由协议：西出网关无故人，敢问路在何方</span></a></li></ul></li><li><a href="/blog/趣谈网络协议/04.第二模块底层网络知识详解最重要的传输层">04.第二模块底层网络知识详解最重要的传输层</a><ul><li><a href="/blog/趣谈网络协议/04.第二模块底层网络知识详解最重要的传输层/01"><span>第10讲 | UDP协议：因性善而简单，难免碰到“城会玩”</span></a></li><li><a href="/blog/趣谈网络协议/04.第二模块底层网络知识详解最重要的传输层/02"><span>第11讲 | TCP协议（上）：因性恶而复杂，先恶后善反轻松</span></a></li><li><a href="/blog/趣谈网络协议/04.第二模块底层网络知识详解最重要的传输层/03"><span>第12讲 | TCP协议（下）：西行必定多妖孽，恒心智慧消磨难</span></a></li><li><a href="/blog/趣谈网络协议/04.第二模块底层网络知识详解最重要的传输层/04"><span>第13讲 | 套接字Socket：Talk is cheap, show me the code</span></a></li></ul></li><li><a aria-current="page" class="active" href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层">05.第二模块底层网络知识详解最常用的应用层</a><ul><li><a href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/01"><span>第14讲 | HTTP协议：看个新闻原来这么麻烦</span></a></li><li><a href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/02"><span>第15讲 | HTTPS协议：点外卖的过程原来这么复杂</span></a></li><li><a href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/03"><span>第16讲 | 流媒体协议：如何在直播里看到美女帅哥？</span></a></li><li><a aria-current="page" class="active" href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04"><span>第17讲 | P2P协议：我下小电影，99%急死你</span></a></li></ul></li><li><a href="/blog/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心">06.第二模块底层网络知识详解陌生的数据中心</a><ul><li><a href="/blog/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/01"><span>第18讲 | DNS协议：网络世界的地址簿</span></a></li><li><a href="/blog/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/02"><span>第19讲 | HttpDNS：网络世界的地址簿也会指错路</span></a></li><li><a href="/blog/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/03"><span>第20讲 | CDN：你去小卖部取过快递么？</span></a></li><li><a href="/blog/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/04"><span>第21讲 | 数据中心：我是开发商，自己拿地盖别墅</span></a></li><li><a href="/blog/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/05"><span>第22讲 | VPN：朝中有人好做官</span></a></li><li><a href="/blog/趣谈网络协议/06.第二模块底层网络知识详解陌生的数据中心/06"><span>第23讲 | 移动网络：去巴塞罗那，手机也上不了脸书</span></a></li></ul></li><li><a href="/blog/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络">07.第三模块热门技术中的应用云计算中的网络</a><ul><li><a href="/blog/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/01"><span>第24讲 | 云中网络：自己拿地成本高，购买公寓更灵活</span></a></li><li><a href="/blog/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/02"><span>第25讲 | 软件定义网络：共享基础设施的小区物业管理办法</span></a></li><li><a href="/blog/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/03"><span>第26讲 | 云中的网络安全：虽然不是土豪，也需要基本安全和保障</span></a></li><li><a href="/blog/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/04"><span>第27讲 | 云中的网络QoS：邻居疯狂下电影，我该怎么办？</span></a></li><li><a href="/blog/趣谈网络协议/07.第三模块热门技术中的应用云计算中的网络/05"><span>第28讲 | 云中网络的隔离GRE、VXLAN：虽然住一个小区，也要保护隐私</span></a></li></ul></li><li><a href="/blog/趣谈网络协议/08.第三模块热门技术中的应用容器技术中的网络">08.第三模块热门技术中的应用容器技术中的网络</a><ul><li><a href="/blog/趣谈网络协议/08.第三模块热门技术中的应用容器技术中的网络/01"><span>第29讲 | 容器网络：来去自由的日子，不买公寓去合租</span></a></li><li><a href="/blog/趣谈网络协议/08.第三模块热门技术中的应用容器技术中的网络/02"><span>第30讲 | 容器网络之Flannel：每人一亩三分地</span></a></li><li><a href="/blog/趣谈网络协议/08.第三模块热门技术中的应用容器技术中的网络/03"><span>第31讲 | 容器网络之Calico：为高效说出善意的谎言</span></a></li></ul></li><li><a href="/blog/趣谈网络协议/09.第三模块热门技术中的应用微服务相关协议">09.第三模块热门技术中的应用微服务相关协议</a><ul><li><a href="/blog/趣谈网络协议/09.第三模块热门技术中的应用微服务相关协议/01"><span>第32讲 | RPC协议综述：远在天边，近在眼前</span></a></li><li><a href="/blog/趣谈网络协议/09.第三模块热门技术中的应用微服务相关协议/02"><span>第33讲 | 基于XML的SOAP协议：不要说NBA，请说美国职业篮球联赛</span></a></li><li><a href="/blog/趣谈网络协议/09.第三模块热门技术中的应用微服务相关协议/03"><span>第34讲 | 基于JSON的RESTful接口协议：我不关心过程，请给我结果</span></a></li><li><a href="/blog/趣谈网络协议/09.第三模块热门技术中的应用微服务相关协议/04"><span>第35讲 | 二进制类RPC协议：还是叫NBA吧，总说全称多费劲</span></a></li><li><a href="/blog/趣谈网络协议/09.第三模块热门技术中的应用微服务相关协议/05"><span>第36讲 | 跨语言类RPC协议：交流之前，双方先来个专业术语表</span></a></li></ul></li><li><a href="/blog/趣谈网络协议/10.第四模块网络协议知识串讲">10.第四模块网络协议知识串讲</a><ul><li><a href="/blog/趣谈网络协议/10.第四模块网络协议知识串讲/01"><span>第37讲 | 知识串讲：用双十一的故事串起碎片的网络协议（上）</span></a></li><li><a href="/blog/趣谈网络协议/10.第四模块网络协议知识串讲/02"><span>第38讲 | 知识串讲：用双十一的故事串起碎片的网络协议（中）</span></a></li><li><a href="/blog/趣谈网络协议/10.第四模块网络协议知识串讲/03"><span>第39讲 | 知识串讲：用双十一的故事串起碎片的网络协议（下）</span></a></li><li><a href="/blog/趣谈网络协议/10.第四模块网络协议知识串讲/04"><span>第40讲 | 搭建一个网络实验环境：授人以鱼不如授人以渔</span></a></li></ul></li><li><a href="/blog/趣谈网络协议/11.答疑与加餐">11.答疑与加餐</a><ul><li><a href="/blog/趣谈网络协议/11.答疑与加餐/01"><span>协议专栏特别福利 | 答疑解惑第一期</span></a></li><li><a href="/blog/趣谈网络协议/11.答疑与加餐/02"><span>协议专栏特别福利 | 答疑解惑第二期</span></a></li><li><a href="/blog/趣谈网络协议/11.答疑与加餐/03"><span>协议专栏特别福利 | 答疑解惑第三期</span></a></li><li><a href="/blog/趣谈网络协议/11.答疑与加餐/04"><span>协议专栏特别福利 | 答疑解惑第四期</span></a></li><li><a href="/blog/趣谈网络协议/11.答疑与加餐/05"><span>协议专栏特别福利 | 答疑解惑第五期</span></a></li><li><a href="/blog/趣谈网络协议/11.答疑与加餐/06"><span>加餐1 | 创作故事：我是如何创作“趣谈网络协议”专栏的？</span></a></li><li><a href="/blog/趣谈网络协议/11.答疑与加餐/07"><span>加餐2 | “趣谈网络协议”专栏食用指南</span></a></li><li><a href="/blog/趣谈网络协议/11.答疑与加餐/08"><span>第2季回归 | 这次我们来“趣谈Linux操作系统”</span></a></li></ul></li><li><a href="/blog/趣谈网络协议/12.结束语">12.结束语</a><ul><li><a href="/blog/趣谈网络协议/12.结束语/01"><span>结束语 | 放弃完美主义，执行力就是限时限量认真完成</span></a></li><li><a href="/blog/趣谈网络协议/12.结束语/02"><span>结课测试 | 这些网络协议你都掌握了吗？</span></a></li></ul></li><li><a href="/blog/趣谈网络协议/summary">趣谈网络协议</a></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="FTP的两种工作模式" data-depth="2"><a href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04#ftp的两种工作模式"><span>FTP的两种工作模式</span></a></li><li title="P2P是什么？" data-depth="2"><a href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04#p2p是什么"><span>P2P是什么？</span></a></li><li title="种子（.torrent）文件" data-depth="2"><a href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04#种子torrent文件"><span>种子（.torrent）文件</span></a></li><li title="去中心化网络（DHT）" data-depth="2"><a href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04#去中心化网络dht"><span>去中心化网络（DHT）</span></a></li><li title="哈希值" data-depth="2"><a href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04#哈希值"><span>哈希值</span></a></li><li title="DHT网络中的朋友圈是怎么维护的？" data-depth="2"><a href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04#dht网络中的朋友圈是怎么维护的"><span>DHT网络中的朋友圈是怎么维护的？</span></a></li><li title="DHT网络是如何查找朋友的？" data-depth="2"><a href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04#dht网络是如何查找朋友的"><span>DHT网络是如何查找朋友的？</span></a></li><li title="小结" data-depth="2"><a href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04#小结"><span>小结</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="第17讲--p2p协议我下小电影99急死你"><a aria-hidden="true" tabindex="-1" href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04#第17讲--p2p协议我下小电影99急死你"><span class="icon icon-link"></span></a>第17讲 | P2P协议：我下小电影，99%急死你</h1><p>如果你想下载一个电影，一般会通过什么方式呢？</p><p>当然，最简单的方式就是通过<strong>HTTP</strong>进行下载。但是相信你有过这样的体验，通过浏览器下载的时候，只要文件稍微大点，下载的速度就奇慢无比。</p><p>还有种下载文件的方式，就是通过<strong>FTP</strong>，也即<strong>文件传输协议</strong>。FTP采用两个TCP连接来传输一个文件。</p><ul><li><p><strong>控制连接</strong>：服务器以被动的方式，打开众所周知用于FTP的端口21，客户端则主动发起连接。该连接将命令从客户端传给服务器，并传回服务器的应答。常用的命令有：list——获取文件目录；reter——取一个文件；store——存一个文件。</p></li><li><p><strong>数据连接</strong>：每当一个文件在客户端与服务器之间传输时，就创建一个数据连接。</p></li></ul><h2 id="ftp的两种工作模式"><a aria-hidden="true" tabindex="-1" href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04#ftp的两种工作模式"><span class="icon icon-link"></span></a>FTP的两种工作模式</h2><p>每传输一个文件，都要建立一个全新的数据连接。FTP有两种工作模式，分别是<strong>主动模式</strong>（<strong>PORT</strong>）和<strong>被动模式</strong>（<strong>PASV</strong>），这些都是站在FTP服务器的角度来说的。</p><p>主动模式下，客户端随机打开一个大于1024的端口N，向服务器的命令端口21发起连接，同时开放N+1端口监听，并向服务器发出 “port N+1” 命令，由服务器从自己的数据端口20，主动连接到客户端指定的数据端口N+1。</p><p>被动模式下，当开启一个FTP连接时，客户端打开两个任意的本地端口N（大于1024）和N+1。第一个端口连接服务器的21端口，提交PASV命令。然后，服务器会开启一个任意的端口P（大于1024），返回“227 entering passive mode”消息，里面有FTP服务器开放的用来进行数据传输的端口。客户端收到消息取得端口号之后，会通过N+1号端口连接服务器的端口P，然后在两个端口之间进行数据传输。</p><h2 id="p2p是什么"><a aria-hidden="true" tabindex="-1" href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04#p2p是什么"><span class="icon icon-link"></span></a>P2P是什么？</h2><p>但是无论是HTTP的方式，还是FTP的方式，都有一个比较大的缺点，就是<strong>难以解决单一服务器的带宽压力</strong>， 因为它们使用的都是传统的客户端服务器的方式。</p><p>后来，一种创新的、称为P2P的方式流行起来。<strong>P2P</strong>就是<strong>peer-to-peer</strong>。资源开始并不集中地存储在某些设备上，而是分散地存储在多台设备上。这些设备我们姑且称为peer。</p><p>想要下载一个文件的时候，你只要得到那些已经存在了文件的peer，并和这些peer之间，建立点对点的连接，而不需要到中心服务器上，就可以就近下载文件。一旦下载了文件，你也就成为peer中的一员，你旁边的那些机器，也可能会选择从你这里下载文件，所以当你使用P2P软件的时候，例如BitTorrent，往往能够看到，既有下载流量，也有上传的流量，也即你自己也加入了这个P2P的网络，自己从别人那里下载，同时也提供给其他人下载。可以想象，这种方式，参与的人越多，下载速度越快，一切完美。</p><h2 id="种子torrent文件"><a aria-hidden="true" tabindex="-1" href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04#种子torrent文件"><span class="icon icon-link"></span></a>种子（.torrent）文件</h2><p>但是有一个问题，当你想下载一个文件的时候，怎么知道哪些peer有这个文件呢？</p><p>这就用到<strong>种子</strong>啦，也即咱们比较熟悉的**.torrent文件**。.torrent文件由两部分组成，分别是：<strong>announce</strong>（<strong>tracker URL</strong>）和<strong>文件信息</strong>。</p><p>文件信息里面有这些内容。</p><ul><li><p><strong>info区</strong>：这里指定的是该种子有几个文件、文件有多长、目录结构，以及目录和文件的名字。</p></li><li><p><strong>Name字段</strong>：指定顶层目录名字。</p></li><li><p><strong>每个段的大小</strong>：BitTorrent（简称BT）协议把一个文件分成很多个小段，然后分段下载。</p></li><li><p><strong>段哈希值</strong>：将整个种子中，每个段的SHA-1哈希值拼在一起。</p></li></ul><p>下载时，BT客户端首先解析.torrent文件，得到tracker地址，然后连接tracker服务器。tracker服务器回应下载者的请求，将其他下载者（包括发布者）的IP提供给下载者。下载者再连接其他下载者，根据.torrent文件，两者分别对方告知自己已经有的块，然后交换对方没有的数据。此时不需要其他服务器参与，并分散了单个线路上的数据流量，因此减轻了服务器的负担。</p><p>下载者每得到一个块，需要算出下载块的Hash验证码，并与.torrent文件中的对比。如果一样，则说明块正确，不一样则需要重新下载这个块。这种规定是为了解决下载内容的准确性问题。</p><p>从这个过程也可以看出，这种方式特别依赖tracker。tracker需要收集下载者信息的服务器，并将此信息提供给其他下载者，使下载者们相互连接起来，传输数据。虽然下载的过程是非中心化的，但是加入这个P2P网络的时候，都需要借助tracker中心服务器，这个服务器是用来登记有哪些用户在请求哪些资源。</p><p>所以，这种工作方式有一个弊端，一旦tracker服务器出现故障或者线路遭到屏蔽，BT工具就无法正常工作了。</p><h2 id="去中心化网络dht"><a aria-hidden="true" tabindex="-1" href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04#去中心化网络dht"><span class="icon icon-link"></span></a>去中心化网络（DHT）</h2><p>那能不能彻底非中心化呢？</p><p>于是，后来就有了一种叫作<strong>DHT</strong>（<strong>Distributed Hash Table</strong>）的去中心化网络。每个加入这个DHT网络的人，都要负责存储这个网络里的资源信息和其他成员的联系信息，相当于所有人一起构成了一个庞大的分布式存储数据库。</p><p>有一种著名的DHT协议，叫<strong>Kademlia协议</strong>。这个和区块链的概念一样，很抽象，我来详细讲一下这个协议。</p><p>任何一个BitTorrent启动之后，它都有两个角色。一个是<strong>peer</strong>，监听一个TCP端口，用来上传和下载文件，这个角色表明，我这里有某个文件。另一个角色<strong>DHT node</strong>，监听一个UDP的端口，通过这个角色，这个节点加入了一个DHT的网络。</p><p><img src="/images/%E8%B6%A3%E8%B0%88%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/05.%E7%AC%AC%E4%BA%8C%E6%A8%A1%E5%9D%97%E5%BA%95%E5%B1%82%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86%E8%AF%A6%E8%A7%A3%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84%E5%BA%94%E7%94%A8%E5%B1%82/resourceimage802780ecacb45587d201cbb9a08c31476d27.jpg" alt=""/><br/>在DHT网络里面，每一个DHT node都有一个ID。这个ID是一个很长的串。每个DHT node都有责任掌握一些知识，也就是<strong>文件索引</strong>，也即它应该知道某些文件是保存在哪些节点上。它只需要有这些知识就可以了，而它自己本身不一定就是保存这个文件的节点。</p><h2 id="哈希值"><a aria-hidden="true" tabindex="-1" href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04#哈希值"><span class="icon icon-link"></span></a>哈希值</h2><p>当然，每个DHT node不会有全局的知识，也即不知道所有的文件保存在哪里，它只需要知道一部分。那应该知道哪一部分呢？这就需要用哈希算法计算出来。</p><p>每个文件可以计算出一个哈希值，而<strong>DHT node的ID是和哈希值相同长度的串</strong>。</p><p>DHT算法是这样规定的：如果一个文件计算出一个哈希值，则和这个哈希值一样的那个DHT node，就有责任知道从哪里下载这个文件，即便它自己没保存这个文件。</p><p>当然不一定这么巧，总能找到和哈希值一模一样的，有可能一模一样的DHT node也下线了，所以DHT算法还规定：除了一模一样的那个DHT node应该知道，ID和这个哈希值非常接近的N个DHT node也应该知道。</p><p>什么叫和哈希值接近呢？例如只修改了最后一位，就很接近；修改了倒数2位，也不远；修改了倒数3位，也可以接受。总之，凑齐了规定的N这个数就行。</p><p>刚才那个图里，文件1通过哈希运算，得到匹配ID的DHT node为node C，当然还会有其他的，我这里没有画出来。所以，node C有责任知道文件1的存放地址，虽然node C本身没有存放文件1。</p><p>同理，文件2通过哈希运算，得到匹配ID的DHT node为node E，但是node D和E的ID值很近，所以node D也知道。当然，文件2本身没有必要一定在node D和E里，但是碰巧这里就在E那有一份。</p><p>接下来一个新的节点node new上线了。如果想下载文件1，它首先要加入DHT网络，如何加入呢？</p><p>在这种模式下，种子.torrent文件里面就不再是tracker的地址了，而是一个list的node的地址，而所有这些node都是已经在DHT网络里面的。当然随着时间的推移，很可能有退出的，有下线的，但是我们假设，不会所有的都联系不上，总有一个能联系上。</p><p>node new只要在种子里面找到一个DHT node，就加入了网络。</p><p>node new会计算文件1的哈希值，并根据这个哈希值了解到，和这个哈希值匹配，或者很接近的node上知道如何下载这个文件，例如计算出来的哈希值就是node C。</p><p>但是node new不知道怎么联系上node C，因为种子里面的node列表里面很可能没有node C，但是它可以问，DHT网络特别像一个社交网络，node new只有去它能联系上的node问，你们知道不知道node C的联系方式呀？</p><p>在DHT网络中，每个node都保存了一定的联系方式，但是肯定没有node的所有联系方式。DHT网络中，节点之间通过互相通信，也会交流联系方式，也会删除联系方式。和人们的方式一样，你有你的朋友圈，你的朋友有它的朋友圈，你们互相加微信，就互相认识了，过一段时间不联系，就删除朋友关系。</p><p>有个理论是，社交网络中，任何两个人直接的距离不超过六度，也即你想联系比尔盖茨，也就六个人就能够联系到了。</p><p>所以，node new想联系node C，就去万能的朋友圈去问，并且求转发，朋友再问朋友，很快就能找到。如果找不到C，也能找到和C的ID很像的节点，它们也知道如何下载文件1。</p><p>在node C上，告诉node new，下载文件1，要去B、D、 F，于是node new选择和node B进行peer连接，开始下载，它一旦开始下载，自己本地也有文件1了，于是node new告诉node C以及和node C的ID很像的那些节点，我也有文件1了，可以加入那个文件拥有者列表了。</p><p>但是你会发现node new上没有文件索引，但是根据哈希算法，一定会有某些文件的哈希值是和node new的ID匹配上的。在DHT网络中，会有节点告诉它，你既然加入了咱们这个网络，你也有责任知道某些文件的下载地址。</p><p>好了，一切都分布式了。</p><p>这里面遗留几个细节的问题。</p><ul><li>DHT node ID以及文件哈希是个什么东西？</li></ul><p>节点ID是一个随机选择的160bits（20字节）空间，文件的哈希也使用这样的160bits空间。</p><ul><li>所谓ID相似，具体到什么程度算相似？</li></ul><p>在Kademlia网络中，距离是通过异或（XOR）计算的。我们就不以160bits举例了。我们以5位来举例。</p><p>01010与01000的距离，就是两个ID之间的异或值，为00010，也即为2。 01010与00010的距离为01000，也即为8,。01010与00011的距离为01001，也即8+1=9 。以此类推，高位不同的，表示距离更远一些；低位不同的，表示距离更近一些，总的距离为所有的不同的位的距离之和。</p><p>这个距离不能比喻为地理位置，因为在Kademlia网络中，位置近不算近，ID近才算近，所以我把这个距离比喻为社交距离，也即在朋友圈中的距离，或者社交网络中的距离。这个和你住的位置没有关系，和人的经历关系比较大。</p><p>还是以5位ID来举例，就像在领英中，排第一位的表示最近一份工作在哪里，第二位的表示上一份工作在哪里，然后第三位的是上上份工作，第四位的是研究生在哪里读，第五位的表示大学在哪里读。</p><p>如果你是一个猎头，在上面找候选人，当然最近的那份工作是最重要的。而对于工作经历越丰富的候选人，大学在哪里读的反而越不重要。</p><h2 id="dht网络中的朋友圈是怎么维护的"><a aria-hidden="true" tabindex="-1" href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04#dht网络中的朋友圈是怎么维护的"><span class="icon icon-link"></span></a>DHT网络中的朋友圈是怎么维护的？</h2><p>就像人一样，虽然我们常联系人的只有少数，但是朋友圈里肯定是远近都有。DHT网络的朋友圈也是一样，远近都有，并且<strong>按距离分层</strong>。</p><p>假设某个节点的ID为01010，如果一个节点的ID，前面所有位数都与它相同，只有最后1位不同。这样的节点只有1个，为01011。与基础节点的异或值为00001，即距离为1；对于01010而言，这样的节点归为“k-bucket 1”。</p><p>如果一个节点的ID，前面所有位数都相同，从倒数第2位开始不同，这样的节点只有2个，即01000和01001，与基础节点的异或值为00010和00011，即距离范围为2和3；对于01010而言，这样的节点归为“k-bucket 2”。</p><p>如果一个节点的ID，前面所有位数相同，从倒数第i位开始不同，这样的节点只有2^(i-1)个，与基础节点的距离范围为[2^(i-1), 2^i)；对于01010而言，这样的节点归为“k-bucket i”。</p><p>最终到从倒数160位就开始都不同。</p><p>你会发现，差距越大，陌生人越多，但是朋友圈不能都放下，所以每一层都只放K个，这是参数可以配置。</p><h2 id="dht网络是如何查找朋友的"><a aria-hidden="true" tabindex="-1" href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04#dht网络是如何查找朋友的"><span class="icon icon-link"></span></a>DHT网络是如何查找朋友的？</h2><p>假设，node A 的ID为00110，要找node B ID为10000，异或距离为10110，距离范围在[2^4, 2^5)，所以这个目标节点可能在“k-bucket 5”中，这就说明B的ID与A的ID从第5位开始不同，所以B可能在“k-bucket 5”中。</p><p>然后，A看看自己的k-bucket 5有没有B。如果有，太好了，找到你了；如果没有，在k-bucket 5里随便找一个C。因为是二进制，C、B都和A的第5位不同，那么C的ID第5位肯定与B相同，即它与B的距离会小于2^4，相当于比A、B之间的距离缩短了一半以上。</p><p>再请求C，在它自己的通讯录里，按同样的查找方式找一下B。如果C知道B，就告诉A；如果C也不知道B，那C按同样的搜索方法，可以在自己的通讯录里找到一个离B更近的D朋友（D、B之间距离小于2^3），把D推荐给A，A请求D进行下一步查找。</p><p>Kademlia的这种查询机制，是通过折半查找的方式来收缩范围，对于总的节点数目为N，最多只需要查询log2(N)次，就能够找到。</p><p>例如，图中这个最差的情况。</p><p><img src="/images/%E8%B6%A3%E8%B0%88%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/05.%E7%AC%AC%E4%BA%8C%E6%A8%A1%E5%9D%97%E5%BA%95%E5%B1%82%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86%E8%AF%A6%E8%A7%A3%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84%E5%BA%94%E7%94%A8%E5%B1%82/resourceimagedcb4dc6d713751d09ea5dd0d79c65433aeb4.jpg" alt=""/></p><p>A和B每一位都不一样，所以相差31，A找到的朋友C，不巧正好在中间。和A的距离是16，和B距离为15，于是C去自己朋友圈找的时候，不巧找到D，正好又在中间，距离C为8，距离B为7。于是D去自己朋友圈找的时候，不巧找到E，正好又在中间，距离D为4，距离B为3，E在朋友圈找到F，距离E为2，距离B为1，最终在F的朋友圈距离1的地方找到B。当然这是最最不巧的情况，每次找到的朋友都不远不近，正好在中间。</p><p>如果碰巧了，在A的朋友圈里面有G，距离B只有3，然后在G的朋友圈里面一下子就找到了B，两次就找到了。</p><p>在DHT网络中，朋友之间怎么沟通呢？</p><p>Kademlia算法中，每个节点只有4个指令。</p><ul><li><p>PING：测试一个节点是否在线，还活着没，相当于打个电话，看还能打通不。</p></li><li><p>STORE：要求一个节点存储一份数据，既然加入了组织，有义务保存一份数据。</p></li><li><p>FIND_NODE：根据节点ID查找一个节点，就是给一个160位的ID，通过上面朋友圈的方式找到那个节点。</p></li><li><p>FIND_VALUE：根据KEY查找一个数据，实则上跟FIND_NODE非常类似。KEY就是文件对应的160位的ID，就是要找到保存了文件的节点。</p></li></ul><p>DHT网络中，朋友圈如何更新呢？</p><ul><li><p>每个bucket里的节点，都按最后一次接触的时间倒序排列，这就相当于，朋友圈里面最近联系过的人往往是最熟的。</p></li><li><p>每次执行四个指令中的任意一个都会触发更新。</p></li><li><p>当一个节点与自己接触时，检查它是否已经在k-bucket中，也就是说是否已经在朋友圈。如果在，那么将它挪到k-bucket列表的最底，也就是最新的位置，刚联系过，就置顶一下，方便以后多联系；如果不在，新的联系人要不要加到通讯录里面呢？假设通讯录已满的情况，PING一下列表最上面，也即最旧的一个节点。如果PING通了，将旧节点挪到列表最底，并丢弃新节点，老朋友还是留一下；如果PING不通，删除旧节点，并将新节点加入列表，这人联系不上了，删了吧。</p></li></ul><p>这个机制保证了任意节点加入和离开都不影响整体网络。</p><h2 id="小结"><a aria-hidden="true" tabindex="-1" href="/blog/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04#小结"><span class="icon icon-link"></span></a>小结</h2><p>好了，今天的讲解就到这里了，我们总结一下：</p><ul><li><p>下载一个文件可以使用HTTP或FTP，这两种都是集中下载的方式，而P2P则换了一种思路，采取非中心化下载的方式；</p></li><li><p>P2P也是有两种，一种是依赖于tracker的，也即元数据集中，文件数据分散；另一种是基于分布式的哈希算法，元数据和文件数据全部分散。</p></li></ul><p>接下来，给你留两个思考题：</p><ol><li><p>除了这种去中心化分布式哈希的算法，你还能想到其他的应用场景吗？</p></li><li><p>在前面所有的章节中，要下载一个文件，都需要使用域名。但是网络通信是使用IP的，那你知道怎么实现两者的映射机制吗？</p></li></ol><p>我们的专栏马上更新过半了，不知你掌握得如何？每节课后我留的思考题，你都有没有认真思考，并在留言区写下答案呢？我会从已发布的文章中选出一批认真留言的同学，赠送学习奖励礼券和我整理的独家网络协议知识图谱。</p><p>欢迎你留言和我讨论。趣谈网络协议，我们下期见！</p></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/GGwujun/blog/edit/master/docs/趣谈网络协议/05.第二模块底层网络知识详解最常用的应用层/04.md">在 GitHub 上编辑此页<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="最后更新时间：">2023/9/23 13:36:35</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "//www.google-analytics.com/analytics.js",
            "ga"
          );
          ga("create", "UA-149864185-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="/blog/umi.js"></script>
  </body>
</html>
