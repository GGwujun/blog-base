<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="/logo.png" />
    <link rel="stylesheet" href="/blog-base/umi.css" />
    <script>
      window.routerBase = "/blog-base";
    </script>
    <script>
      //! umi version: 3.5.41
    </script>
    <script>
      !(function () {
        var e =
            navigator.cookieEnabled && void 0 !== window.localStorage
              ? localStorage.getItem("dumi:prefers-color")
              : "auto",
          o = window.matchMedia("(prefers-color-scheme: dark)").matches,
          t = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === t[2] ? (o ? t[1] : t[0]) : t.indexOf(e) > -1 ? e : t[0]
        );
      })();
    </script>
    <title>04 | 长函数：为什么你总是不可避免地写出长函数？ - 大师兄</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/代码之丑/02.13类典型坏味道/04" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-base/">大师兄</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span>计算机基础<ul><li><a href="/blog-base/编译原理之美">编译原理之美</a></li><li><a href="/blog-base/编译原理实战">编译原理实战</a></li><li><a href="/blog-base/深入浅出计算机组成原理">深入浅出计算机组成原理</a></li><li><a href="/blog-base/详解http">详解http</a></li><li><a href="/blog-base/计算机网络通关29讲">计算机网络通关29讲</a></li><li><a href="/blog-base/网络排查案例课">网络排查案例课</a></li><li><a href="/blog-base/linux操作系统">linux操作系统</a></li><li><a href="/blog-base/linux内核技术实战课">linux内核技术实战课</a></li><li><a href="/blog-base/linux性能优化实战">linux性能优化实战</a></li><li><a href="/blog-base/程序员数学基础">程序员数学基础</a></li><li><a href="/blog-base/趣谈网络协议">趣谈网络协议</a></li><li><a href="/blog-base/操作系统实战">操作系统实战</a></li><li><a href="/blog-base/软件工程之美">软件工程之美</a></li><li><a href="/blog-base/sql必知必会">sql必知必会</a></li><li><a href="/blog-base/操作系统实战45讲">操作系统实战45讲</a></li><li><a href="/blog-base/网络编程实战">网络编程实战</a></li><li><a href="/blog-base/趣谈linux操作系统">趣谈linux操作系统</a></li></ul></span><span>算法<ul><li><a href="/blog-base/常用算法25讲">常用算法25讲</a></li><li><a href="/blog-base/数据结构与算法之美">数据结构与算法之美</a></li><li><a href="/blog-base/业务开发算法50讲">业务开发算法50讲</a></li><li><a href="/blog-base/动态规划面试宝典">动态规划面试宝典</a></li></ul></span><span>前端开发<ul><li><a href="/blog-base/正则表达式入门">正则表达式入门</a></li></ul></span><span>前端工程化</span><span>前端性能优化</span><span>移动端开发</span><span>软件测试</span><span>产品与用户体验</span><span>面试</span><span>杂谈<ul><li><a aria-current="page" class="active" href="/blog-base/代码之丑">代码之丑</a></li><li><a href="/blog-base/代码精进之路">代码精进之路</a></li><li><a href="/blog-base/数据分析思维课">数据分析思维课</a></li><li><a href="/blog-base/朱涛kotlin编程第一课">朱涛kotlin编程第一课</a></li><li><a href="/blog-base/重学线性代数">重学线性代数</a></li></ul></span><div class="__dumi-default-navbar-tool"><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-base/"></a><h1>大师兄</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li>计算机基础<ul><li><a href="/blog-base/编译原理之美">编译原理之美</a></li><li><a href="/blog-base/编译原理实战">编译原理实战</a></li><li><a href="/blog-base/深入浅出计算机组成原理">深入浅出计算机组成原理</a></li><li><a href="/blog-base/详解http">详解http</a></li><li><a href="/blog-base/计算机网络通关29讲">计算机网络通关29讲</a></li><li><a href="/blog-base/网络排查案例课">网络排查案例课</a></li><li><a href="/blog-base/linux操作系统">linux操作系统</a></li><li><a href="/blog-base/linux内核技术实战课">linux内核技术实战课</a></li><li><a href="/blog-base/linux性能优化实战">linux性能优化实战</a></li><li><a href="/blog-base/程序员数学基础">程序员数学基础</a></li><li><a href="/blog-base/趣谈网络协议">趣谈网络协议</a></li><li><a href="/blog-base/操作系统实战">操作系统实战</a></li><li><a href="/blog-base/软件工程之美">软件工程之美</a></li><li><a href="/blog-base/sql必知必会">sql必知必会</a></li><li><a href="/blog-base/操作系统实战45讲">操作系统实战45讲</a></li><li><a href="/blog-base/网络编程实战">网络编程实战</a></li><li><a href="/blog-base/趣谈linux操作系统">趣谈linux操作系统</a></li></ul></li><li>算法<ul><li><a href="/blog-base/常用算法25讲">常用算法25讲</a></li><li><a href="/blog-base/数据结构与算法之美">数据结构与算法之美</a></li><li><a href="/blog-base/业务开发算法50讲">业务开发算法50讲</a></li><li><a href="/blog-base/动态规划面试宝典">动态规划面试宝典</a></li></ul></li><li>前端开发<ul><li><a href="/blog-base/正则表达式入门">正则表达式入门</a></li></ul></li><li>前端工程化</li><li>前端性能优化</li><li>移动端开发</li><li>软件测试</li><li>产品与用户体验</li><li>面试</li><li>杂谈<ul><li><a aria-current="page" class="active" href="/blog-base/代码之丑">代码之丑</a></li><li><a href="/blog-base/代码精进之路">代码精进之路</a></li><li><a href="/blog-base/数据分析思维课">数据分析思维课</a></li><li><a href="/blog-base/朱涛kotlin编程第一课">朱涛kotlin编程第一课</a></li><li><a href="/blog-base/重学线性代数">重学线性代数</a></li></ul></li></ul><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a href="/blog-base/代码之丑">代码之丑</a></li><li><a href="/blog-base/代码之丑/01.开篇词">01.开篇词</a><ul><li><a href="/blog-base/代码之丑/01.开篇词/01"><span>开篇词 | 这一次，我们从“丑”代码出发</span></a></li><li><a href="/blog-base/代码之丑/01.开篇词/02"><span>课前热身 | 这些需求给到你，你会怎么写代码？</span></a></li></ul></li><li><a aria-current="page" class="active" href="/blog-base/代码之丑/02.13类典型坏味道">02.13类典型坏味道</a><ul><li><a href="/blog-base/代码之丑/02.13类典型坏味道/01"><span>01 | 缺乏业务含义的命名：如何精准命名？</span></a></li><li><a href="/blog-base/代码之丑/02.13类典型坏味道/02"><span>02 | 乱用英语：站在中国人的视角来看英文命名</span></a></li><li><a href="/blog-base/代码之丑/02.13类典型坏味道/03"><span>03 | 重复代码：简单需求到处修改，怎么办？</span></a></li><li><a aria-current="page" class="active" href="/blog-base/代码之丑/02.13类典型坏味道/04"><span>04 | 长函数：为什么你总是不可避免地写出长函数？</span></a></li><li><a href="/blog-base/代码之丑/02.13类典型坏味道/05"><span>05 | 大类：如何避免写出难以理解的大类？</span></a></li><li><a href="/blog-base/代码之丑/02.13类典型坏味道/06"><span>06 | 长参数列表：如何处理不同类型的长参数？</span></a></li><li><a href="/blog-base/代码之丑/02.13类典型坏味道/07"><span>07 | 滥用控制语句：出现控制结构，多半是错误的提示</span></a></li><li><a href="/blog-base/代码之丑/02.13类典型坏味道/08"><span>08 | 缺乏封装：如何应对火车代码和基本类型偏执问题？</span></a></li><li><a href="/blog-base/代码之丑/02.13类典型坏味道/09"><span>09 | 可变的数据：不要让你的代码“失控”</span></a></li><li><a href="/blog-base/代码之丑/02.13类典型坏味道/10"><span>10 | 变量声明与赋值分离：普通的变量声明，怎么也有坏味道？</span></a></li><li><a href="/blog-base/代码之丑/02.13类典型坏味道/11"><span>11 | 依赖混乱：你可能还没发现问题，代码就已经无法挽救了</span></a></li><li><a href="/blog-base/代码之丑/02.13类典型坏味道/12"><span>12 | 不一致的代码：为什么你的代码总被吐槽难懂？</span></a></li><li><a href="/blog-base/代码之丑/02.13类典型坏味道/13"><span>13 | 落后的代码风格：使用“新”的语言特性和程序库升级你的代码</span></a></li></ul></li><li><a href="/blog-base/代码之丑/03.延伸阅读">03.延伸阅读</a><ul><li><a href="/blog-base/代码之丑/03.延伸阅读/01"><span>14 | 多久进行一次代码评审最合适？</span></a></li><li><a href="/blog-base/代码之丑/03.延伸阅读/02"><span>15 | 新需求破坏了代码，怎么办？</span></a></li><li><a href="/blog-base/代码之丑/03.延伸阅读/03"><span>16 | 熊节：什么代码应该被重构？</span></a></li><li><a href="/blog-base/代码之丑/03.延伸阅读/04"><span>17 | 课前作业点评：发现“你”代码里的坏味道</span></a></li></ul></li><li><a href="/blog-base/代码之丑/04.结束语">04.结束语</a><ul><li><a href="/blog-base/代码之丑/04.结束语/01"><span>结束语 | 写代码是一件可以一生精进的事</span></a></li><li><a href="/blog-base/代码之丑/04.结束语/02"><span>结课测试｜这些代码坏味道的知识你都掌握了吗？</span></a></li><li><a href="/blog-base/代码之丑/04.结束语/03"><span>第四季回归 | 通向高质量代码之路</span></a></li></ul></li><li><a href="/blog-base/代码之丑/summary">代码之丑</a></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="多长的函数才算“长”？" data-depth="2"><a href="/blog-base/代码之丑/02.13类典型坏味道/04#多长的函数才算长"><span>多长的函数才算“长”？</span></a></li><li title="长函数的产生" data-depth="2"><a href="/blog-base/代码之丑/02.13类典型坏味道/04#长函数的产生"><span>长函数的产生</span></a></li><li title="总结时刻" data-depth="2"><a href="/blog-base/代码之丑/02.13类典型坏味道/04#总结时刻"><span>总结时刻</span></a></li><li title="思考题" data-depth="2"><a href="/blog-base/代码之丑/02.13类典型坏味道/04#思考题"><span>思考题</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="04--长函数为什么你总是不可避免地写出长函数"><a aria-hidden="true" tabindex="-1" href="/blog-base/代码之丑/02.13类典型坏味道/04#04--长函数为什么你总是不可避免地写出长函数"><span class="icon icon-link"></span></a>04 | 长函数：为什么你总是不可避免地写出长函数？</h1><p>你好，我是郑晔。</p><p>这一讲，我们来讲一个你一定深恶痛绝的坏味道：长函数。</p><p>有一个关于程序员的段子，说程序员一定要用大屏显示器，而且一定要竖起来用，这样才能看到一个函数的全貌。这显然是在调侃函数很长，小屏甚至横屏都不足以看到整个函数，只有竖起来才行。</p><p>只要一提到长函数，无论是去被迫理解一个长函数的含义，还是要在一个长函数中，小心翼翼地找出需要的逻辑，按照需求微调一下，几乎所有程序员都会有不愉悦的回忆。可以这么说，没有人喜欢长函数，但在实际工作中，却不得不去与各种长函数打交道。</p><p>不知道你在实际工作中遇到最长的函数有多长，几百上千行的函数肯定是不足以称霸的。在我的职业生涯中，经常是我以为自己够见多识广了，但只要新接触到一个有悠久历史的代码库，就总会有突破认知的长函数出现。</p><p>长函数是一个“我一说，你就知道怎么回事”的坏味道，我就不准备用一个典型的长函数来开启这一讲了，否则，这一讲的篇幅都不够了。但是，为了统一认识，我准备先讨论一下多长的函数算是长函数，我们来看一个案例。</p><h2 id="多长的函数才算长"><a aria-hidden="true" tabindex="-1" href="/blog-base/代码之丑/02.13类典型坏味道/04#多长的函数才算长"><span class="icon icon-link"></span></a>多长的函数才算“长”？</h2><p>有一次，我在一个团队做分享，讲怎么把一个长函数重构成小函数。现场演示之后，我问了大家一个问题：在你心目中，多长的函数才算长呢？</p><p>一个现场听众很认真地思考了一下，给出了一个答案：100 行。我很尴尬地看了一下自己刚刚重构掉的两个函数，最长的一个都不到 100 行。换言之，以他的标准来看，这个函数根本就不是长函数，根本就没有必要重构。</p><p><strong>对于函数长度容忍度高，这是导致长函数产生的关键点</strong>。</p><p>如果一个人认为 100 行代码不算长，那在他眼中，很多代码根本就是没有问题的，也就更谈不上看到更多问题了，这其实是一个观察尺度的问题。这就好比，没有电子显微镜之前，人们很难理解疾病的原理，因为看不到病毒，就不可能理解病毒可以致病这个道理。</p><p><strong>一个好的程序员面对代码库时要有不同尺度的观察能力，看设计时，要能够高屋建瓴，看代码时，要能细致入微</strong>。</p><p>这里的要点就是，看具体代码时，一定要能够看到细微之处。我在《<a target="_blank" rel="noopener noreferrer" href="https://time.geekbang.org/column/intro/100022301">10x 程序员工作法<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>》专栏中讲到过“任务分解”，关键点就是将任务拆解得越小越好，这个观点对代码同样适用。随着对代码长度容忍度的降低，对代码细节的感知力就会逐渐提升，你才能看到那些原本所谓细枝末节的地方隐藏的各种问题。</p><p>回到具体的工作中，“越小越好”是一个追求的目标，不过，没有一个具体的数字，就没办法约束所有人的行为。所以，通常情况下，我们还是要定义出一个代码行数的上限，以保证所有人都可以按照这个标准执行。</p><p>我自己写代码的习惯是这样的。像 Python、Ruby 这样表达能力比较强的动态语言，大多数情况下，<a target="_blank" rel="noopener noreferrer" href="https://en.wikipedia.org/wiki/One-liner_program">一行代码（one-liner program）<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>可以解决很多问题，所以，我对自己的要求大约是 5 行左右，并且能够用一行代码解决的问题，就尽量会用一行代码解决；而像 Java 这样表达能力稍弱的静态类型语言，我也争取在 10 行代码之内解决问题。</p><p>当然，这是我对自己的要求，在实际的项目中，可能不是每个人都能做到这一点，所以，我给了一个更为宽松的限制，在自己的标准上翻了番，也就是 20 行。</p><p>这不是一个说说就算的标准，我们应该把它变成一个可执行的标准。比如，在 Java 中，我们就可以把代码行的约束加到 CheckStyle 的配置文件中，就像下面这样：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">&lt;module name=&quot;MethodLength&quot;&gt;</span></div><div class="token-line"><span class="token plain">        &lt;property name=&quot;tokens&quot; value=&quot;METHOD_DEF&quot;/&gt;</span></div><div class="token-line"><span class="token plain">        &lt;property name=&quot;max&quot; value=&quot;20&quot;/&gt;</span></div><div class="token-line"><span class="token plain">        &lt;property name=&quot;countEmpty&quot; value=&quot;false&quot;/&gt;</span></div><div class="token-line"><span class="token plain">    &lt;/module&gt;</span></div></pre></div><p>这样，在我们提交代码之前，执行本地的构建脚本，就可以把长函数检测出来（关于 CheckStyle，我在《<a target="_blank" rel="noopener noreferrer" href="https://time.geekbang.org/column/intro/100022301">10x 程序员工作法<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>》中讲<a target="_blank" rel="noopener noreferrer" href="https://time.geekbang.org/column/article/86561">项目自动化<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>时专门做过介绍，你有兴趣不妨了解一下）。如果你用的是其它的程序设计语言，不妨也找一下相应的静态检查工具，看看是否提供类似的配置。</p><p>我知道，即便是以 20 行为上限，这也已经超过很多人的认知，具体的函数行数可以结合团队的实际情况来制定，但是，我非常不建议把这个数字放得很大，就像我前面说的那样，如果你放到 100 行，这个数字基本上是没有太多意义的，对团队也起不到什么约束作用。</p><p>我之所以要先讨论多长的函数算是长函数，是因为如果你不能认识到代码行的标准应该很低，那么在接下来的讨论中，有些代码示例可能在你看来，就根本不需要调整了。</p><h2 id="长函数的产生"><a aria-hidden="true" tabindex="-1" href="/blog-base/代码之丑/02.13类典型坏味道/04#长函数的产生"><span class="icon icon-link"></span></a>长函数的产生</h2><p>不过，限制函数长度，是一种简单粗暴的解决方案。最重要的是你要知道，长函数本身是一个结果，如果不理解长函数产生的原因，还是很难写出整洁的代码。接下来，我们就来看看长函数是怎么产生的。</p><ul><li><strong>以性能为由</strong></li></ul><p>人们写长函数的历史由来已久。在《软件设计之美》专栏里，我讲过<a target="_blank" rel="noopener noreferrer" href="https://time.geekbang.org/column/article/245868">程序设计语言的发展历史<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。像 C 语言这种在今天已经是高性能的程序设计语言，在问世之初，也曾被人质疑性能不彰，尤其是函数调用。</p><p>在一些写汇编语言的人看来，调用函数涉及到入栈出栈的过程，显然不如直接执行来得性能高。这种想法经过各种演变流传到今天，任何一门新语言出现，还是会以同样的理由被质疑。</p><p>所以，在很多人看来，把函数写长是为了所谓性能。不过，这个观点在今天是站不住的。<strong>性能优化不应该是写代码的第一考量。</strong></p><p>一方面，一门有活力的程序设计语言本身是不断优化的，无论是编译器，还是运行时，性能都会越来越好；另一方面，可维护性比性能优化要优先考虑，当性能不足以满足需要时，我们再来做相应的测量，找到焦点，进行特定的优化。这比在写代码时就考虑所谓性能要更能锁定焦点，优化才是有意义的。</p><ul><li><strong>平铺直叙</strong></li></ul><p>除了以性能为由把代码写长，还有一种最常见的原因也会把代码写长，那就是写代码平铺直叙，把自己想到的一点点罗列出来。比如下面这段代码（如果你不想仔细阅读，可以直接跳到后面）：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">public void executeTask() {</span></div><div class="token-line"><span class="token plain">        ObjectMapper mapper = new ObjectMapper();</span></div><div class="token-line"><span class="token plain">        CloseableHttpClient client = HttpClients.createDefault();</span></div><div class="token-line"><span class="token plain">        List&lt;Chapter&gt; chapters = this.chapterService.getUntranslatedChapters();</span></div><div class="token-line"><span class="token plain">        for (Chapter chapter : chapters) {</span></div><div class="token-line"><span class="token plain">            // Send Chapter</span></div><div class="token-line"><span class="token plain">            SendChapterRequest sendChapterRequest = new SendChapterRequest();</span></div><div class="token-line"><span class="token plain">            sendChapterRequest.setTitle(chapter.getTitle());</span></div><div class="token-line"><span class="token plain">            sendChapterRequest.setContent(chapter.getContent());</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">            HttpPost sendChapterPost = new HttpPost(sendChapterUrl);</span></div><div class="token-line"><span class="token plain">            CloseableHttpResponse sendChapterHttpResponse = null;</span></div><div class="token-line"><span class="token plain">            String chapterId = null;</span></div><div class="token-line"><span class="token plain">            try {</span></div><div class="token-line"><span class="token plain">                String sendChapterRequestText = mapper.writeValueAsString(sendChapterRequest);</span></div><div class="token-line"><span class="token plain">                sendChapterPost.setEntity(new StringEntity(sendChapterRequestText));</span></div><div class="token-line"><span class="token plain">                sendChapterHttpResponse = client.execute(sendChapterPost);</span></div><div class="token-line"><span class="token plain">                HttpEntity sendChapterEntity = sendChapterPost.getEntity();</span></div><div class="token-line"><span class="token plain">                SendChapterResponse sendChapterResponse = mapper.readValue(sendChapterEntity.getContent(), SendChapterResponse.class);</span></div><div class="token-line"><span class="token plain">                chapterId = sendChapterResponse.getChapterId();</span></div><div class="token-line"><span class="token plain">            } catch (IOException e) {</span></div><div class="token-line"><span class="token plain">                throw new RuntimeException(e);</span></div><div class="token-line"><span class="token plain">            } finally {</span></div><div class="token-line"><span class="token plain">                try {</span></div><div class="token-line"><span class="token plain">                    if (sendChapterHttpResponse != null) {</span></div><div class="token-line"><span class="token plain">                        sendChapterHttpResponse.close();</span></div><div class="token-line"><span class="token plain">                    }</span></div><div class="token-line"><span class="token plain">                } catch (IOException e) {</span></div><div class="token-line"><span class="token plain">                    // ignore</span></div><div class="token-line"><span class="token plain">                }</span></div><div class="token-line"><span class="token plain">            }</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">            // Translate Chapter</span></div><div class="token-line"><span class="token plain">            HttpPost translateChapterPost = new HttpPost(translateChapterUrl);</span></div><div class="token-line"><span class="token plain">            CloseableHttpResponse translateChapterHttpResponse = null;</span></div><div class="token-line"><span class="token plain">            try {</span></div><div class="token-line"><span class="token plain">                TranslateChapterRequest translateChapterRequest = new TranslateChapterRequest();</span></div><div class="token-line"><span class="token plain">                translateChapterRequest.setChapterId(chapterId);</span></div><div class="token-line"><span class="token plain">                String translateChapterRequestText = mapper.writeValueAsString(translateChapterRequest);</span></div><div class="token-line"><span class="token plain">                translateChapterPost.setEntity(new StringEntity(translateChapterRequestText));</span></div><div class="token-line"><span class="token plain">                translateChapterHttpResponse = client.execute(translateChapterPost);</span></div><div class="token-line"><span class="token plain">                HttpEntity translateChapterEntity = translateChapterHttpResponse.getEntity();</span></div><div class="token-line"><span class="token plain">                TranslateChapterResponse translateChapterResponse = mapper.readValue(translateChapterEntity.getContent(), TranslateChapterResponse.class);</span></div><div class="token-line"><span class="token plain">                if (!translateChapterResponse.isSuccess()) {</span></div><div class="token-line"><span class="token plain">                    logger.warn(&quot;Fail to start translate: {}&quot;, chapterId);</span></div><div class="token-line"><span class="token plain">                }</span></div><div class="token-line"><span class="token plain">            } catch (IOException e) {</span></div><div class="token-line"><span class="token plain">                throw new RuntimeException(e);</span></div><div class="token-line"><span class="token plain">            } finally {</span></div><div class="token-line"><span class="token plain">                if (translateChapterHttpResponse != null) {</span></div><div class="token-line"><span class="token plain">                    try {</span></div><div class="token-line"><span class="token plain">                        translateChapterHttpResponse.close();</span></div><div class="token-line"><span class="token plain">                    } catch (IOException e) {</span></div><div class="token-line"><span class="token plain">                        // ignore</span></div><div class="token-line"><span class="token plain">                    }</span></div><div class="token-line"><span class="token plain">                }</span></div><div class="token-line"><span class="token plain">            }</span></div><div class="token-line"><span class="token plain">        }</span></div></pre></div><p>这段代码的逻辑是，把没有翻译过的章节发到翻译引擎，然后，启动翻译过程。在这里翻译引擎是另外一个服务，需要通过 HTTP 的形式向它发送请求。相对而言，这段代码还算直白，当你知道了我上面所说的逻辑，你是很容易看懂这段代码的。</p><p>这段代码之所以很长，主要原因就是把前面所说的逻辑全部平铺直叙地摆在那里了，这里既有业务处理的逻辑，比如，把章节发送给翻译引擎，然后，启动翻译过程；又有处理的细节，比如，把对象转成 JSON，然后，通过 HTTP 客户端发送出去。</p><p>从这段代码中，我们可以看到平铺直叙的代码存在的两个典型问题：</p><ul><li>把多个业务处理流程放在一个函数里实现；</li><li>把不同层面的细节放到一个函数里实现。</li></ul><p>这里发送章节和启动翻译是两个过程，显然，这是可以放到两个不同的函数中去实现的，所以，我们只要做一下提取函数，就可以把这个看似庞大的函数拆开，而拆出来的几个函数规模都会小很多，像下面这样：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">public void executeTask() {</span></div><div class="token-line"><span class="token plain">        ObjectMapper mapper = new ObjectMapper();</span></div><div class="token-line"><span class="token plain">        CloseableHttpClient client = HttpClients.createDefault();</span></div><div class="token-line"><span class="token plain">        List&lt;Chapter&gt; chapters = this.chapterService.getUntranslatedChapters();</span></div><div class="token-line"><span class="token plain">        for (Chapter chapter : chapters) {</span></div><div class="token-line"><span class="token plain">            String chapterId = sendChapter(mapper, client, chapter);</span></div><div class="token-line"><span class="token plain">            translateChapter(mapper, client, chapterId);</span></div><div class="token-line"><span class="token plain">        }</span></div><div class="token-line"><span class="token plain">    }</span></div></pre></div><p>拆出来的部分，实际上就是把对象打包发送的过程，我们以发送章节为例，先来看拆出来的发送章节部分：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">private String sendChapter(final ObjectMapper mapper,</span></div><div class="token-line"><span class="token plain">                               final CloseableHttpClient client,</span></div><div class="token-line"><span class="token plain">                               final Chapter chapter) {</span></div><div class="token-line"><span class="token plain">        SendChapterRequest request = asSendChapterRequest(chapter);</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">        CloseableHttpResponse response = null;</span></div><div class="token-line"><span class="token plain">        String chapterId = null;</span></div><div class="token-line"><span class="token plain">        try {</span></div><div class="token-line"><span class="token plain">            HttpPost post = sendChapterRequest(mapper, request);</span></div><div class="token-line"><span class="token plain">            response = client.execute(post);</span></div><div class="token-line"><span class="token plain">            chapterId = asChapterId(mapper, post);</span></div><div class="token-line"><span class="token plain">        } catch (IOException e) {</span></div><div class="token-line"><span class="token plain">            throw new RuntimeException(e);</span></div><div class="token-line"><span class="token plain">        } finally {</span></div><div class="token-line"><span class="token plain">            try {</span></div><div class="token-line"><span class="token plain">                if (response != null) {</span></div><div class="token-line"><span class="token plain">                    response.close();</span></div><div class="token-line"><span class="token plain">                }</span></div><div class="token-line"><span class="token plain">            } catch (IOException e) {</span></div><div class="token-line"><span class="token plain">                // ignore</span></div><div class="token-line"><span class="token plain">            }</span></div><div class="token-line"><span class="token plain">        }</span></div><div class="token-line"><span class="token plain">        return chapterId;</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    private HttpPost sendChapterRequest(final ObjectMapper mapper, final SendChapterRequest sendChapterRequest) throws JsonProcessingException, UnsupportedEncodingException {</span></div><div class="token-line"><span class="token plain">        HttpPost post = new HttpPost(sendChapterUrl);</span></div><div class="token-line"><span class="token plain">        String requestText = mapper.writeValueAsString(sendChapterRequest);</span></div><div class="token-line"><span class="token plain">        post.setEntity(new StringEntity(requestText));</span></div><div class="token-line"><span class="token plain">        return post;</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    private String asChapterId(final ObjectMapper mapper, final HttpPost sendChapterPost) throws IOException {</span></div><div class="token-line"><span class="token plain">        String chapterId;</span></div><div class="token-line"><span class="token plain">        HttpEntity entity = sendChapterPost.getEntity();</span></div><div class="token-line"><span class="token plain">        SendChapterResponse response = mapper.readValue(entity.getContent(), SendChapterResponse.class);</span></div><div class="token-line"><span class="token plain">        chapterId = response.getChapterId();</span></div><div class="token-line"><span class="token plain">        return chapterId;</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    private SendChapterRequest asSendChapterRequest(final Chapter chapter) {</span></div><div class="token-line"><span class="token plain">        SendChapterRequest request = new SendChapterRequest();</span></div><div class="token-line"><span class="token plain">        request.setTitle(chapter.getTitle());</span></div><div class="token-line"><span class="token plain">        request.setContent(chapter.getContent());</span></div><div class="token-line"><span class="token plain">        return request</span></div><div class="token-line"><span class="token plain">    }</span></div></pre></div><p>当然，这个代码还算不上已经处理得很整洁了，但至少同之前相比，已经简洁了一些。我们只用了最简单的<strong>提取函数</strong>这个重构手法，就把一个大函数拆分成了若干的小函数。</p><p>顺便说一下，<strong>长函数往往还隐含着一个命名问题</strong>。如果你看修改后的sendChapter，其中的变量命名明显比之前要短，理解的成本也相应地会降低。因为变量都是在这个短小的上下文里，也就不会产生那么多的命名冲突，变量名当然就可以写短一些。</p><p>平铺直叙的代码，一个关键点就是没有把不同的东西分解出来。如果我们用设计的眼光衡量这段代码，这就是“分离关注点”没有做好，把不同层面的东西混在了一起，既有不同业务混在一起，也有不同层次的处理混在了一起。我在《软件设计之美》专栏中，也曾说过，<strong>关注点越多越好，粒度越小越好。</strong></p><ul><li><strong>一次加一点</strong></li></ul><p>有时，一段代码一开始的时候并不长，就像下面这段代码，它根据返回的错误进行相应地错误处理：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">if (code == 400 || code == 401) {</span></div><div class="token-line"><span class="token plain">      // 做一些错误处理</span></div><div class="token-line"><span class="token plain">    }</span></div></pre></div><p>然后，新的需求来了，增加了新的错误码，它就变成了这个样子：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">if (code == 400 || code == 401 || code == 402) {</span></div><div class="token-line"><span class="token plain">      // 做一些错误处理</span></div><div class="token-line"><span class="token plain">    }</span></div></pre></div><p>你知道，一个有生命力的项目经常会延续很长时间，于是，这段代码有很多次被修改的机会，日积月累，它就成了让人不忍直视的代码，比如：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">if (code == 400 || code == 401 || code == 402 || ...</span></div><div class="token-line"><span class="token plain">      || code == 500 || ...</span></div><div class="token-line"><span class="token plain">      || ...</span></div><div class="token-line"><span class="token plain">      || code == 10000 || ...) {</span></div><div class="token-line"><span class="token plain">      // 做一些错误处理</span></div><div class="token-line"><span class="token plain">    }</span></div></pre></div><p>后来人看到这段代码就想骂人了。当他从版本控制的历史中找到这些代码的作者，去询问这些处理的来龙去脉时，每个人其实都很委屈，他们当时也没做太多，只是加了一个判断条件而已。</p><p>**任何代码都经不起这种无意识的累积，每个人都没做错，但最终的结果很糟糕。**对抗这种逐渐糟糕腐坏的代码，我们需要知道“童子军军规”：</p><blockquote><p>让营地比你来时更干净。<br/>—— 童子军军规</p></blockquote><p>Robert Martin 把它借鉴到了编程领域，简言之，我们应该看看自己对于代码的改动是不是让原有的代码变得更糟糕了，如果是，那就改进它。但这一切的前提是，你要能看出自己的代码是不是让原有的代码变得糟糕了，所以，学习代码的坏味道还是很有必要的。</p><p>至此，我们看到了代码变长的几种常见原因：</p><ul><li>以性能为由；</li><li>平铺直叙；</li><li>一次加一点。</li></ul><p>你会发现，代码变长根本是一个无意识的问题，写代码的人没有觉得自己把代码破坏了。但只要你认识到长函数是一个坏味道，后面的许多问题就自然而然地会被发掘出来，至于解决方案，你已经看到了，大部分情况下，就是拆分成各种小函数。</p><h2 id="总结时刻"><a aria-hidden="true" tabindex="-1" href="/blog-base/代码之丑/02.13类典型坏味道/04#总结时刻"><span class="icon icon-link"></span></a>总结时刻</h2><p>今天我们讲了程序员最深恶痛绝的坏味道：长函数。没有人愿意去阅读长函数，但许多人又会不经意间写出长函数。</p><p>毫无疑问，长函数是一个坏味道。对于团队而言，一个关键点是要定义出长函数的标准。不过，过于宽泛的标准是没有意义的，想要有效地控制函数规模，几十行的函数已经是标准的上限了，这个标准越低越好。</p><p>我们还分析了长函数产生的原因：</p><ul><li>有人以性能为借口；</li><li>有人把代码平铺直叙地摊在那里；</li><li>有人只是每次增加了一点点。</li></ul><p>其中，平铺直叙是把函数写长最常见的原因。之所以会把代码平摊在那里，一方面是把多个业务写到了一起，另一方面是把不同层次的代码写到了一起。究其根因，那是“分离关注点”没有做好。</p><p>每次增加一点点，是另外一个让代码变长的原因，应对它的主要办法就是要坚守“童子军军规”，但其背后更深层次的支撑就是要对坏味道有着深刻的认识。</p><p>如果今天的内容你只能记住一件事，那请记住：<strong>把函数写短，越短越好</strong>。</p><p><img src="/images/%E4%BB%A3%E7%A0%81%E4%B9%8B%E4%B8%91/02.13%E7%B1%BB%E5%85%B8%E5%9E%8B%E5%9D%8F%E5%91%B3%E9%81%93/resourceimage17bf17ef4030fb39dc02400f8e03e2547cbf.jpg" alt=""/></p><h2 id="思考题"><a aria-hidden="true" tabindex="-1" href="/blog-base/代码之丑/02.13类典型坏味道/04#思考题"><span class="icon icon-link"></span></a>思考题</h2><p>你在实际的工作中遇到过长函数吗？讲讲你和长函数斗争的故事，欢迎在留言区写下你的经历。如果你身边有人正在为“长函数”苦恼，也欢迎你把这节课分享给他。</p><p>感谢阅读，我们下一讲再见！</p><p>参考资料：<br/><a target="_blank" rel="noopener noreferrer" href="https://time.geekbang.org/column/article/86561">一个好的项目自动化应该是什么样子的？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p><a target="_blank" rel="noopener noreferrer" href="https://time.geekbang.org/column/article/245868">语言的模型：如何打破单一语言局限，让设计更好地落地？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p><a target="_blank" rel="noopener noreferrer" href="https://time.geekbang.org/column/article/240749">分离关注点：软件设计至关重要的第一步<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/GGwujun/blog/edit/master/ssrc/代码之丑/02.13类典型坏味道/04.md">在 GitHub 上编辑此页<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="最后更新时间：">2023/9/23 16:07:27</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "//www.google-analytics.com/analytics.js",
            "ga"
          );
          ga("create", "UA-149864185-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="/blog-base/umi.js"></script>
  </body>
</html>
